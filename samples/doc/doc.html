

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>WeasyPrint 43 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/icon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>


<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="https://weasyprint.readthedocs.io/en/stable/" />

<link rel="stylesheet" href="_static/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'index'
</script>

<script type="text/javascript" src="https://media.readthedocs.org/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html#document-index" class="icon icon-home"> WeasyPrint
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
            
              <div class="version">
                stable
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-install">Installing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#linux">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#macos">macOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorial">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#as-a-standalone-program">As a standalone program</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#as-a-python-library">As a Python library</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#weasyprint-tools">WeasyPrint Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#security">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#errors">Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#stylesheet-origins">Stylesheet origins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-api">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#api-stability">API stability</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#command-line-api">Command-line API</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#python-api">Python API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-features">Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#urls">URLs</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#html">HTML</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#pdf">PDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#fonts">Fonts</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#css">CSS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-hacking">Hacking WeasyPrint</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#documentation-changes">Documentation changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#code-changes">Code changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#dive-into-the-source">Dive into the source</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-changelog">News</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-43">Version 43</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-43rc2">Version 43rc2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-43rc1">Version 43rc1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-42-3">Version 0.42.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-42-2">Version 0.42.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-42-1">Version 0.42.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-42">Version 0.42</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-41">Version 0.41</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-40">Version 0.40</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-39">Version 0.39</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-38">Version 0.38</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-37">Version 0.37</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-36">Version 0.36</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-35">Version 0.35</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-34">Version 0.34</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-33">Version 0.33</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-32">Version 0.32</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-31">Version 0.31</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-30">Version 0.30</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-29">Version 0.29</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-28">Version 0.28</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-27">Version 0.27</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-26">Version 0.26</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-25">Version 0.25</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-24">Version 0.24</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-23">Version 0.23</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-22">Version 0.22</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-21">Version 0.21</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-20-2">Version 0.20.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-20-1">Version 0.20.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-20">Version 0.20</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-19-2">Version 0.19.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-19-1">Version 0.19.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-19">Version 0.19</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-18">Version 0.18</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-17-1">Version 0.17.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-17">Version 0.17</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-16">Version 0.16</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-15">Version 0.15</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-14">Version 0.14</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-13">Version 0.13</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-12">Version 0.12</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-11">Version 0.11</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-10">Version 0.10</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-9">Version 0.9</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-8">Version 0.8</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-7-1">Version 0.7.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-7">Version 0.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-6-1">Version 0.6.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-6">Version 0.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-5">Version 0.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-4">Version 0.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-3-1">Version 0.3.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-3">Version 0.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-2">Version 0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-1">Version 0.1</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html#document-index">WeasyPrint</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html#document-index">Docs</a> &raquo;</li>
        
      <li>WeasyPrint 43 documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/Kozea/WeasyPrint/blob/0f25c532873653a5bdc258c723dfe07c2085beaf/docs/index.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="weasyprint">
<h1>WeasyPrint<a class="headerlink" href="#weasyprint" title="Permalink to this headline">¶</a></h1>
<p>WeasyPrint is a visual rendering engine for HTML and CSS that can export
to PDF. It aims to support web standards for printing.
WeasyPrint is free software made available under a BSD license.</p>
<p>It is based on various libraries but <em>not</em> on a full rendering engine like
WebKit or Gecko. The CSS layout engine is written in Python, designed for
pagination, and meant to be easy to hack on.</p>
<ul class="simple">
<li>Free software: BSD licensed</li>
<li>Python 3.4+</li>
<li>Website: <a class="reference external" href="https://weasyprint.org/">https://weasyprint.org/</a></li>
<li>Documentation: <a class="reference external" href="https://weasyprint.readthedocs.io/">https://weasyprint.readthedocs.io/</a></li>
<li>Source code and issue tracker: <a class="reference external" href="https://github.com/Kozea/WeasyPrint">https://github.com/Kozea/WeasyPrint</a></li>
<li>Tests: <a class="reference external" href="https://travis-ci.org/Kozea/WeasyPrint">https://travis-ci.org/Kozea/WeasyPrint</a></li>
<li>Support: <a class="reference external" href="https://www.patreon.com/kozea">https://www.patreon.com/kozea</a></li>
</ul>
<div class="section" id="documentation-contents">
<h2>Documentation contents<a class="headerlink" href="#documentation-contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-install"></span><div class="section" id="installing">
<h3>Installing<a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h3>
<p>WeasyPrint 43 depends on:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.python.org/">CPython</a> ≥ 3.4.0</li>
<li><a class="reference external" href="http://cairographics.org/">cairo</a> ≥ 1.15.4 <a class="footnote-reference" href="#id4" id="id1">[1]</a></li>
<li><a class="reference external" href="http://www.pango.org/">Pango</a> ≥ 1.38.0 <a class="footnote-reference" href="#id7" id="id2">[2]</a></li>
<li><a class="reference external" href="https://pypi.org/project/setuptools/">setuptools</a> ≥ 30.3.0</li>
<li><a class="reference external" href="https://cffi.readthedocs.io/">CFFI</a> ≥ 0.6</li>
<li><a class="reference external" href="https://html5lib.readthedocs.io/">html5lib</a> ≥ 0.999999999</li>
<li><a class="reference external" href="https://cairocffi.readthedocs.io/">cairocffi</a> ≥ 0.9.0</li>
<li><a class="reference external" href="https://tinycss2.readthedocs.io/">tinycss2</a> ≥ 0.5</li>
<li><a class="reference external" href="https://cssselect2.readthedocs.io/">cssselect2</a> ≥ 0.1</li>
<li><a class="reference external" href="http://cairosvg.org/">CairoSVG</a> ≥ 1.0.20</li>
<li><a class="reference external" href="http://pyphen.org/">Pyphen</a> ≥ 0.8</li>
<li><a class="reference external" href="https://live.gnome.org/GdkPixbuf">GDK-PixBuf</a> ≥ 2.25.0 <a class="footnote-reference" href="#id8" id="id3">[3]</a></li>
</ul>
<p>Python, cairo, Pango and GDK-PixBuf need to be installed separately. See
platform-specific instructions for <a class="reference internal" href="#linux"><span class="std std-ref">Linux</span></a>, <a class="reference internal" href="#macos"><span class="std std-ref">macOS</span></a>
and <a class="reference internal" href="#windows"><span class="std std-ref">Windows</span></a> below.</p>
<p>Install WeasyPrint with <a class="reference external" href="http://pip-installer.org/">pip</a>. This will automatically install most of
dependencies. You probably need either a virtual environment (venv,
recommended) or using <code class="docutils literal notranslate"><span class="pre">sudo</span></code>.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python3 -m venv ./venv
. ./venv/bin/activate
pip install WeasyPrint
</pre></div>
</div>
<p>Now let’s try it:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>weasyprint --help
weasyprint http://weasyprint.org ./weasyprint-website.pdf
</pre></div>
</div>
<p>You should see warnings about unsupported CSS 3 stuff; this is expected.
In the PDF you should see the WeasyPrint logo on the first page.</p>
<p>You can also play with <a class="reference internal" href="index.html#navigator"><span class="std std-ref">WeasyPrint Navigator</span></a> or <a class="reference internal" href="index.html#renderer"><span class="std std-ref">WeasyPrint Renderer</span></a>. Start it with</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python -m weasyprint.tools.navigator
</pre></div>
</div>
<p>or</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python -m weasyprint.tools.renderer
</pre></div>
</div>
<p>and open your browser at <a class="reference external" href="http://127.0.0.1:5000/">http://127.0.0.1:5000/</a>.</p>
<p>If everything goes well, you’re ready to <a class="reference internal" href="index.html#document-tutorial"><span class="doc">start using</span></a>
WeasyPrint! Otherwise, please copy the full error message and
<a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/">report the problem</a>.</p>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>cairo ≥ 1.15.4 is best but older versions may work too. The test suite
passes on cairo 1.14, and passes with some tests marked as “expected
failures” on 1.10 and 1.12 due to behavior changes or bugs in cairo. If
you get incomplete SVG renderings, please read <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/339">#339</a>. If you get invalid
PDF files, please read <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/565">#565</a>. Some PDF metadata
including PDF information, hyperlinks and bookmarks require 1.15.4.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>pango ≥ 1.29.3 is required, but 1.38.0 is needed to handle <cite>&#64;font-face</cite>
CSS rules.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td>Without it, PNG and SVG are the only supported image formats.
JPEG, GIF and others are not available.</td></tr>
</tbody>
</table>
<div class="section" id="linux">
<span id="id9"></span><h4>Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h4>
<p>Pango, GdkPixbuf, and cairo can not be installed
with pip and need to be installed from your platform’s packages.
CFFI can, but you’d still need their own dependencies.
This section lists system packages for CFFI when available,
the dependencies otherwise.
CFFI needs <em>libffi</em> with development files. On Debian, the package is called
<code class="docutils literal notranslate"><span class="pre">libffi-dev</span></code>.</p>
<p>If your favorite system is not listed here but you know the package names,
<a class="reference external" href="http://weasyprint.org/about/">tell us</a> so we can add it here.</p>
<div class="section" id="debian-ubuntu">
<h5>Debian / Ubuntu<a class="headerlink" href="#debian-ubuntu" title="Permalink to this headline">¶</a></h5>
<p>Debian 9.0 Stretch or newer, Ubuntu 16.04 Xenial or newer:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo apt-get install build-essential python3-dev python3-pip python3-setuptools python3-wheel python3-cffi libcairo2 libpango-1.0-0 libpangocairo-1.0-0 libgdk-pixbuf2.0-0 libffi-dev shared-mime-info
</pre></div>
</div>
</div>
<div class="section" id="fedora">
<h5>Fedora<a class="headerlink" href="#fedora" title="Permalink to this headline">¶</a></h5>
<p>WeasyPrint is <a class="reference external" href="https://apps.fedoraproject.org/packages/weasyprint">packaged for Fedora</a>, but you can install it
with pip after installing the following packages:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo yum install redhat-rpm-config python-devel python-pip python-setuptools python-wheel python-cffi libffi-devel cairo pango gdk-pixbuf2
</pre></div>
</div>
</div>
<div class="section" id="archlinux">
<h5>Archlinux<a class="headerlink" href="#archlinux" title="Permalink to this headline">¶</a></h5>
<p>WeasyPrint is <a class="reference external" href="https://aur.archlinux.org/packages/python-weasyprint/">available in the AUR</a>, but you can install
it with pip after installing the following packages:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo pacman -S python-pip python-setuptools python-wheel cairo pango gdk-pixbuf2 libffi pkg-config
</pre></div>
</div>
</div>
<div class="section" id="gentoo">
<h5>Gentoo<a class="headerlink" href="#gentoo" title="Permalink to this headline">¶</a></h5>
<p>WeasyPrint is <a class="reference external" href="https://packages.gentoo.org/packages/dev-python/weasyprint">packaged in Gentoo</a>, but you can
install it with pip after installing the following packages:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>emerge pip setuptools wheel cairo pango gdk-pixbuf cffi
</pre></div>
</div>
</div>
<div class="section" id="alpine">
<h5>Alpine<a class="headerlink" href="#alpine" title="Permalink to this headline">¶</a></h5>
<p>For Alpine Linux 3.6 or newer:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>apk --update --upgrade add gcc musl-dev jpeg-dev zlib-dev libffi-dev cairo-dev pango-dev gdk-pixbuf
</pre></div>
</div>
</div>
</div>
<div class="section" id="macos">
<span id="id10"></span><h4>macOS<a class="headerlink" href="#macos" title="Permalink to this headline">¶</a></h4>
<p>WeasyPrint is automatically installed and tested on virtual macOS machines. The
official installation method relies on Homebrew:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>brew install python3 cairo pango gdk-pixbuf libffi
</pre></div>
</div>
<p>Don’t forget to use the <cite>pip3</cite> command to install WeasyPrint, as <cite>pip</cite> may be
using the version of Python installed with macOS.</p>
<p>You can also try with Macports, but please notice that this solution is not
tested and thus not recommended (<strong>also known as “you’re on your own and may
end up crying blood with sad dolphins for eternity”</strong>):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo port install py-pip cairo pango gdk-pixbuf2 libffi
</pre></div>
</div>
</div>
<div class="section" id="windows">
<span id="id11"></span><h4>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h4>
<p>Dear Windows user, please follow these steps carefully.</p>
<p>Really carefully. Don’t cheat.</p>
<p>Besides a proper Python installation and a few Python packages, WeasyPrint
needs the Pango, Cairo and GDK-PixBuf libraries. They are required for the
graphical stuff: Text and image rendering.  These libraries aren’t Python
packages. They are part of <a class="reference external" href="https://en.wikipedia.org/wiki/GTK+">GTK+</a>
(formerly known as GIMP Toolkit), and must be installed separately.</p>
<p>The following installation instructions for the GTK+ libraries don’t work on
Windows XP. That means: Windows Vista or later is required.</p>
<p>Of course you can decide to install ancient WeasyPrint versions with an
erstwhile Python, combine it with outdated GTK+ libraries on any Windows
version you like, but if you decide to do that <strong>you’re on your own, don’t even
try to report an issue, kittens will die because of you.</strong></p>
<div class="section" id="step-1-install-python">
<h5>Step 1 - Install Python<a class="headerlink" href="#step-1-install-python" title="Permalink to this headline">¶</a></h5>
<p>Install the <a class="reference external" href="https://www.python.org/downloads/windows/">latest Python 3.x</a></p>
<ul class="simple">
<li>On Windows 32 bit download the “Windows <strong>x86</strong> executable installer”</li>
<li>On Windows 64 bit download the “Windows <strong>x86-64</strong> executable installer”</li>
</ul>
<p>Follow the <a class="reference external" href="https://docs.python.org/3/using/windows.html">instructions</a>.
You may customize your installation as you like, but we suggest that you
“Add Python 3.x to PATH” for convenience and let the installer “install pip”.</p>
</div>
<div class="section" id="step-2-update-pip-and-setuptools-packages">
<h5>Step 2 - Update pip and setuptools packages<a class="headerlink" href="#step-2-update-pip-and-setuptools-packages" title="Permalink to this headline">¶</a></h5>
<p>Python is bundled with modules that may have been updated since the release.
Please open a <em>Command Prompt</em> and execute the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python -m pip install --upgrade pip setuptools</span>
</pre></div>
</div>
</div>
<div class="section" id="step-3-install-weasyprint">
<h5>Step 3 - Install WeasyPrint<a class="headerlink" href="#step-3-install-weasyprint" title="Permalink to this headline">¶</a></h5>
<p>In the console window execute the following command to install the WeasyPrint
package:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python -m pip install WeasyPrint</span>
</pre></div>
</div>
</div>
<div class="section" id="step-4-install-the-gtk-libraries">
<h5>Step 4 - Install the GTK+ libraries<a class="headerlink" href="#step-4-install-the-gtk-libraries" title="Permalink to this headline">¶</a></h5>
<p>There’s one thing you <strong>must</strong> observe:</p>
<ul class="simple">
<li>If your Python is 32 bit you must use the 32 bit versions of those libraries.</li>
<li>If your Python is 64 bit you must use the 64 bit versions of those libraries.</li>
</ul>
<p>If you mismatch the bitness, the warning about kittens dying applies.</p>
<p>In case you forgot which Python you installed, ask Python (in the console
window):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python --version --version</span>
</pre></div>
</div>
<p>Having installed Python 64 bit you can either use the <a class="reference internal" href="#gtk64installer"><span class="std std-ref">GTK+ 64 Bit
Installer</span></a> or install the 64-bit <a class="reference internal" href="#msys2-gtk"><span class="std std-ref">GTK+ via MSYS2</span></a>.</p>
<p>On Windows 32 bit or if you decided to install Python 32 bit on your Windows 64
bit machine you’ll have to install the 32-bit <a class="reference internal" href="#msys2-gtk"><span class="std std-ref">GTK+ via MSYS2</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Installing those libraries doesn’t mean something extraordinary. It only
means that the files must be on your computer and WeasyPrint must be able
to find them, which is achieved by putting the path-to-the-libs into your
Windows <code class="docutils literal notranslate"><span class="pre">PATH</span></code>.</p>
</div>
<div class="section" id="install-gtk-with-the-aid-of-msys2">
<span id="msys2-gtk"></span><h6>Install GTK+ with the aid of MSYS2<a class="headerlink" href="#install-gtk-with-the-aid-of-msys2" title="Permalink to this headline">¶</a></h6>
<p>Sadly the <a class="reference external" href="https://gtk-win.sourceforge.io/home/index.php/Main/Home">GTK+ Runtime for 32 bit Windows</a> was discontinued in
April 2017.  Since then developers are advised to either bundle GTK+ with their
software (which is beyond the capacities of the WeasyPrint maintainers) or
install it through the <a class="reference external" href="https://msys2.github.io/">MSYS2 project</a>.</p>
<p>With the help of MSYS2, both the 32 bit as well as the 64 bit GTK+ can be
installed.  If you installed the 64 bit Python and don’t want to bother with
MSYS2, then go ahead and use the <a class="reference internal" href="#gtk64installer"><span class="std std-ref">GTK+ 64 Bit Installer</span></a>.</p>
<p>MSYS2 is a development environment. We (somehow) mis-use it to only supply the
up-to-date GTK+ runtime library files in a subfolder we can inject into our
<code class="docutils literal notranslate"><span class="pre">PATH</span></code>. But maybe you get interested in the full powers of MSYS2. It’s the
perfect tool for experimenting with <a class="reference external" href="https://en.wikipedia.org/wiki/MinGW">MinGW</a> and cross-platform development – look
at its <a class="reference external" href="https://github.com/msys2/msys2/wiki">wiki</a>.</p>
<p>Ok, let’s install GTK3+.</p>
<ul>
<li><p class="first">Download and run the <a class="reference external" href="http://www.msys2.org/">MSYS2 installer</a></p>
<ul class="simple">
<li>On 32 bit Windows: “msys2-<strong>i686</strong>-xxxxxxxx.exe”</li>
<li>On 64 bit Windows: “msys2-<strong>x86_64</strong>-xxxxxxxx.exe”</li>
</ul>
<p>You alternatively may download a zipped archive, unpack it and run
<code class="docutils literal notranslate"><span class="pre">msys2_shell.cmd</span></code> as described in the <a class="reference external" href="https://github.com/msys2/msys2/wiki/MSYS2-installation">MSYS2 wiki</a>.</p>
</li>
<li><p class="first">Update the MSYS2 shell with</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pacman -Syuu</span>
</pre></div>
</div>
<p>Close the shell by clicking the close button in the upper right corner of the window.</p>
</li>
<li><p class="first">Restart the MSYS2 shell. Repeat the command</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pacman -Su</span>
</pre></div>
</div>
<p>until it says that there are no more packages to update.</p>
</li>
<li><p class="first">Install the GTK+ package and its dependencies.</p>
<p>To install the 32 bit (<strong>i686</strong>) GTK run the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pacman -S mingw-w64-i686-gtk3</span>
</pre></div>
</div>
<p>The command for the 64 bit (<strong>x86_64</strong>) version is:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pacman -S mingw-w64-x86_64-gtk3</span>
</pre></div>
</div>
<p>The <strong>x86_64</strong> package cannot be installed in the 32 bit MSYS2!</p>
</li>
<li><p class="first">Close the shell:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">exit</span>
</pre></div>
</div>
</li>
<li><p class="first">Now that all the GTK files needed by WeasyPrint are in the <code class="docutils literal notranslate"><span class="pre">.\mingw32</span></code>
respectively in the <code class="docutils literal notranslate"><span class="pre">.\mingw64</span></code> subfolder of your MSYS2 installation directory,
we can (and must) make them accessible by injecting the appropriate folder into the
<code class="docutils literal notranslate"><span class="pre">PATH</span></code>.</p>
<p>Let’s assume you installed MSYS2 in <code class="docutils literal notranslate"><span class="pre">C:\msys2</span></code>. Then the folder to inject is:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">C:\msys2\mingw32\bin</span></code> for the 32 bit GTK+</li>
<li><code class="docutils literal notranslate"><span class="pre">C:\msys2\mingw64\bin</span></code> for the 64 bit GTK+</li>
</ul>
</div></blockquote>
<p>You can either persist it through <em>Advanced System Settings</em> – if you don’t
know how to do that, read <a class="reference external" href="https://www.computerhope.com/issues/ch000549.htm">How to set the path and environment variables in
Windows</a> – or
temporarily inject the folder before you run WeasyPrint.</p>
</li>
</ul>
</div>
<div class="section" id="gtk-64-bit-installer">
<span id="gtk64installer"></span><h6>GTK+ 64 Bit Installer<a class="headerlink" href="#gtk-64-bit-installer" title="Permalink to this headline">¶</a></h6>
<p>If your Python is 64 bit you can use an installer extracted from MSYS2
and provided by Tom Schoonjans.</p>
<ul class="simple">
<li>Download and run the latest <a class="reference external" href="https://github.com/tschoonj/GTK-for-Windows-Runtime-Environment-Installer">gtk3-runtime-x.x.x-x-x-x-ts-win64.exe</a></li>
<li>If you prefer to manage your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment varaiable yourself you
should uncheck “Set up PATH environment variable to include GTK+” and supply
it later – either persist it through <em>Advanced System Settings</em> or
temporarily inject it before you run WeasyPrint.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Checking the option doesn’t insert the GTK-path at the beginning of your
system <code class="docutils literal notranslate"><span class="pre">PATH</span></code>, but rather <strong>appends</strong> it. If there is alread another
(outdated) GTK on your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> this will lead to unpleasant problems.</p>
</div>
<p>In any case: When executing WeasyPrint the GTK libraries must be on its <code class="docutils literal notranslate"><span class="pre">PATH</span></code>.</p>
</div>
</div>
<div class="section" id="step-5-run-weasyprint">
<h5>Step 5 - Run WeasyPrint<a class="headerlink" href="#step-5-run-weasyprint" title="Permalink to this headline">¶</a></h5>
<p>Now that everything is in place you can test WeasyPrint.</p>
<p>Open a fresh <em>Command Prompt</em> and execute</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python -m weasyprint http://weasyprint.org weasyprint.pdf</span>
</pre></div>
</div>
<p>If you get an error like <code class="docutils literal notranslate"><span class="pre">OSError:</span> <span class="pre">dlopen()</span> <span class="pre">failed</span> <span class="pre">to</span> <span class="pre">load</span> <span class="pre">a</span> <span class="pre">library:</span> <span class="pre">cairo</span> <span class="pre">/</span>
<span class="pre">cairo-2</span></code> it’s probably because Cairo (or another GTK+ library mentioned in the
error message) is not properly available in the folders listed in your <code class="docutils literal notranslate"><span class="pre">PATH</span></code>
environment variable.</p>
<p>Since you didn’t cheat and followed the instructions the up-to-date and
complete set of GTK libraries <strong>must</strong> be present and the error is an error.</p>
<p>Lets find out. Enter the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">WHERE libcairo-2.dll</span>
</pre></div>
</div>
<p>This should respond with
<em>path\to\recently\installed\gtk\binaries\libcairo-2.dll</em>, for example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">C:\msys2\mingw64\bin\libcairo-2.dll</span>
</pre></div>
</div>
<p>If your system answers with <em>nothing found</em> or returns a filename not related
to your recently-installed-gtk or lists more than one location and the first
file in the list isn’t actually in a subfolder of your recently-installed-gtk,
then we have caught the culprit.</p>
<p>Depending on the GTK installation route you took, the proper folder name is
something along the lines of:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">C:\msys2\mingw32\bin</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">C:\msys2\mingw34\bin</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\GTK3-Runtime</span> <span class="pre">Win64\bin</span></code></li>
</ul>
<p>Determine the correct folder and execute the following commands, replace
<code class="docutils literal notranslate"><span class="pre">&lt;path-to-recently-installed-gtk&gt;</span></code> accordingly:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">SET PROPER_GTK_FOLDER=&lt;path-to-recently-installed-gtk&gt;</span>
<span class="go">SET PATH=%PROPER_GTK_FOLDER%;%PATH%</span>
</pre></div>
</div>
<p>This puts the appropriate GTK at the beginning of your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> and
it’s files are the first found when WeasyPrint requires them.</p>
<p>Call WeasyPrint again:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python -m weasyprint http://weasyprint.org weasyprint.pdf.</span>
</pre></div>
</div>
<p>If the error is gone you should either fix your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> permanently (via
<em>Advanced System Settings</em>) or execute the above <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">PATH</span></code> command by
default (once!) before you start using WeasyPrint.</p>
<p>If the error still occurs and if you really didn’t cheat then you are allowed
to open a <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/new">new issue</a>. You
can also find extra help in this <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/589">bug report</a>. If you cheated, then, you
know: Kittens already died.</p>
</div>
</div>
</div>
<span id="document-tutorial"></span><div class="section" id="tutorial">
<h3>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h3>
<div class="section" id="as-a-standalone-program">
<h4>As a standalone program<a class="headerlink" href="#as-a-standalone-program" title="Permalink to this headline">¶</a></h4>
<p>Once you have WeasyPrint <a class="reference internal" href="index.html#document-install"><span class="doc">installed</span></a>, you should have a
<code class="docutils literal notranslate"><span class="pre">weasyprint</span></code> executable. Using it can be as simple as this:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>weasyprint http://weasyprint.org /tmp/weasyprint-website.pdf
</pre></div>
</div>
<p>You may see warnings on <em>stderr</em> about unsupported CSS properties.
See <a class="reference internal" href="index.html#command-line-api"><span class="std std-ref">Command-line API</span></a> for the details of all available options.</p>
<p>In particular, the <code class="docutils literal notranslate"><span class="pre">-s</span></code> option can add a filename for a
<a class="reference internal" href="#stylesheet-origins"><span class="std std-ref">user stylesheet</span></a>. For quick experimentation
however, you may not want to create a file. In bash or zsh, you can
use the shell’s redirection instead:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>weasyprint http://weasyprint.org /tmp/weasyprint-website.pdf <span class="se">\</span>
    -s &lt;<span class="o">(</span><span class="nb">echo</span> <span class="s1">&#39;body { font-family: serif !important }&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>If you have many documents to convert you may prefer using the Python API
in long-lived processes to avoid paying the start-up costs every time.</p>
<div class="section" id="adjusting-document-dimensions">
<h5>Adjusting Document Dimensions<a class="headerlink" href="#adjusting-document-dimensions" title="Permalink to this headline">¶</a></h5>
<p>Currently, WeasyPrint does not provide support for adjusting page size
or document margins via command-line flags. This is best accomplished
with the CSS <code class="docutils literal notranslate"><span class="pre">&#64;page</span></code> at-rule. Consider the following example:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">@</span><span class="k">page</span> <span class="p">{</span>
  <span class="nt">size</span><span class="o">:</span> <span class="nt">Letter</span><span class="o">;</span> <span class="c">/* Change from the default size of A4 */</span>
  <span class="nt">margin</span><span class="o">:</span> <span class="nt">2</span><span class="p">.</span><span class="nc">5cm</span><span class="o">;</span> <span class="c">/* Set margin on each page */</span>
<span class="p">}</span>
</pre></div>
</div>
<p>There is much more which can be achieved with the <code class="docutils literal notranslate"><span class="pre">&#64;page</span></code> at-rule,
such as page numbers, headers, etc. Read more about the <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/&#64;page">page</a> at-rule,
and find an example <a class="reference external" href="https://weasyprint.org">here</a>.</p>
</div>
</div>
<div class="section" id="as-a-python-library">
<h4>As a Python library<a class="headerlink" href="#as-a-python-library" title="Permalink to this headline">¶</a></h4>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">Using WeasyPrint with untrusted HTML or untrusted CSS may lead to various
<a class="reference internal" href="#security"><span class="std std-ref">security problems</span></a>.</p>
</div>
<div class="section" id="quickstart">
<h5>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h5>
<p>The Python version of the above example goes like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weasyprint</span> <span class="kn">import</span> <span class="n">HTML</span>
<span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;http://weasyprint.org/&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write_pdf</span><span class="p">(</span><span class="s1">&#39;/tmp/weasyprint-website.pdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>… or with the inline stylesheet:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weasyprint</span> <span class="kn">import</span> <span class="n">HTML</span><span class="p">,</span> <span class="n">CSS</span>
<span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;http://weasyprint.org/&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write_pdf</span><span class="p">(</span><span class="s1">&#39;/tmp/weasyprint-website.pdf&#39;</span><span class="p">,</span>
    <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">CSS</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;body { font-family: serif !important }&#39;</span><span class="p">)])</span>
</pre></div>
</div>
</div>
<div class="section" id="instantiating-html-and-css-objects">
<h5>Instantiating HTML and CSS objects<a class="headerlink" href="#instantiating-html-and-css-objects" title="Permalink to this headline">¶</a></h5>
<p>If you have a file name, an absolute URL or a readable file-like object,
you can just pass it to <a class="reference internal" href="index.html#weasyprint.HTML" title="weasyprint.HTML"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTML</span></code></a> or <a class="reference internal" href="index.html#weasyprint.CSS" title="weasyprint.CSS"><code class="xref py py-class docutils literal notranslate"><span class="pre">CSS</span></code></a> to create an instance.
Alternatively, use a named argument so that no guessing is involved:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weasyprint</span> <span class="kn">import</span> <span class="n">HTML</span>

<span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;../foo.html&#39;</span><span class="p">)</span>  <span class="c1"># Same as …</span>
<span class="n">HTML</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;../foo.html&#39;</span><span class="p">)</span>

<span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;http://weasyprint.org&#39;</span><span class="p">)</span>  <span class="c1"># Same as …</span>
<span class="n">HTML</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s1">&#39;http://weasyprint.org&#39;</span><span class="p">)</span>

<span class="n">HTML</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">)</span>  <span class="c1"># Same as …</span>
<span class="n">HTML</span><span class="p">(</span><span class="n">file_obj</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">)</span>
</pre></div>
</div>
<p>If you have a byte string or Unicode string already in memory you can also pass
that, although the argument must be named:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weasyprint</span> <span class="kn">import</span> <span class="n">HTML</span>

<span class="c1"># HTML(&#39;&lt;h1&gt;foo&#39;) would be filename</span>
<span class="n">HTML</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    &lt;h1&gt;The title&lt;/h1&gt;</span>
<span class="s1">    &lt;p&gt;Content goes here</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="n">CSS</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;@page { size: A3; margin: 1cm }&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you have <code class="docutils literal notranslate"><span class="pre">&#64;font-face</span></code> rules in your CSS, you have to create a
<code class="docutils literal notranslate"><span class="pre">FontConfiguration</span></code> object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weasyprint</span> <span class="kn">import</span> <span class="n">HTML</span><span class="p">,</span> <span class="n">CSS</span>
<span class="kn">from</span> <span class="nn">weasyprint.fonts</span> <span class="kn">import</span> <span class="n">FontConfiguration</span>

<span class="n">font_config</span> <span class="o">=</span> <span class="n">FontConfiguration</span><span class="p">()</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">HTML</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;&lt;h1&gt;The title&lt;/h1&gt;&#39;</span><span class="p">)</span>
<span class="n">css</span> <span class="o">=</span> <span class="n">CSS</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    @font-face {</span>
<span class="s1">        font-family: Gentium;</span>
<span class="s1">        src: url(http://example.com/fonts/Gentium.otf);</span>
<span class="s1">    }</span>
<span class="s1">    h1 { font-family: Gentium }&#39;&#39;&#39;</span><span class="p">,</span> <span class="n">font_config</span><span class="o">=</span><span class="n">font_config</span><span class="p">)</span>
<span class="n">html</span><span class="o">.</span><span class="n">write_pdf</span><span class="p">(</span>
    <span class="s1">&#39;/tmp/example.pdf&#39;</span><span class="p">,</span> <span class="n">stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">css</span><span class="p">],</span>
    <span class="n">font_config</span><span class="o">=</span><span class="n">font_config</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="rendering-to-a-single-file">
<h5>Rendering to a single file<a class="headerlink" href="#rendering-to-a-single-file" title="Permalink to this headline">¶</a></h5>
<p>Once you have a <a class="reference internal" href="index.html#weasyprint.HTML" title="weasyprint.HTML"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTML</span></code></a> object, call its <a class="reference internal" href="index.html#weasyprint.HTML.write_pdf" title="weasyprint.HTML.write_pdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_pdf()</span></code></a> or
<a class="reference internal" href="index.html#weasyprint.HTML.write_png" title="weasyprint.HTML.write_png"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_png()</span></code></a> method to get the rendered document in a single
PDF or PNG file.</p>
<p>Without arguments, these methods return a byte string in memory. If you
pass a file name or a writable file-like object, they will write there
directly instead. (<strong>Warning</strong>: with a filename, these methods will
overwrite existing files silently.)</p>
</div>
<div class="section" id="individual-pages-meta-data-other-output-formats">
<h5>Individual pages, meta-data, other output formats, …<a class="headerlink" href="#individual-pages-meta-data-other-output-formats" title="Permalink to this headline">¶</a></h5>
<p>If you want more than a single PDF, the <a class="reference internal" href="index.html#weasyprint.HTML.render" title="weasyprint.HTML.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a>
method gives you a <a class="reference internal" href="index.html#weasyprint.document.Document" title="weasyprint.document.Document"><code class="xref py py-class docutils literal notranslate"><span class="pre">Document</span></code></a> object with access to individual
<a class="reference internal" href="index.html#weasyprint.document.Page" title="weasyprint.document.Page"><code class="xref py py-class docutils literal notranslate"><span class="pre">Page</span></code></a> objects. Thus you can get the number of pages, their size<a class="footnote-reference" href="#id2" id="id1">[1]</a>,
the details of hyperlinks and bookmarks, etc.
Documents also have <a class="reference internal" href="index.html#weasyprint.document.Document.write_pdf" title="weasyprint.document.Document.write_pdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_pdf()</span></code></a> and <a class="reference internal" href="index.html#weasyprint.document.Document.write_png" title="weasyprint.document.Document.write_png"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_png()</span></code></a>
methods, and you can get a subset of the pages with <a class="reference internal" href="index.html#weasyprint.document.Document.copy" title="weasyprint.document.Document.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">copy()</span></code></a>.
Finally, for ultimate control, <a class="reference internal" href="index.html#weasyprint.document.Page.paint" title="weasyprint.document.Page.paint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">paint()</span></code></a> individual pages anywhere
on any type of cairo surface.</p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Pages in the same document do not always have the same size.</td></tr>
</tbody>
</table>
<p>See the <a class="reference internal" href="index.html#python-api"><span class="std std-ref">Python API</span></a> for details. A few random example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Write odd and even pages separately:</span>
<span class="c1">#   Lists count from 0 but page numbers usually from 1</span>
<span class="c1">#   [::2] is a slice of even list indexes but odd-numbered pages.</span>
<span class="n">document</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">pages</span><span class="p">[::</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">write_pdf</span><span class="p">(</span><span class="s1">&#39;odd_pages.pdf&#39;</span><span class="p">)</span>
<span class="n">document</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">write_pdf</span><span class="p">(</span><span class="s1">&#39;even_pages.pdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Write one PNG image per page:</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">page</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">pages</span><span class="p">):</span>
    <span class="n">document</span><span class="o">.</span><span class="n">copy</span><span class="p">([</span><span class="n">page</span><span class="p">])</span><span class="o">.</span><span class="n">write_png</span><span class="p">(</span><span class="s1">&#39;page_</span><span class="si">%s</span><span class="s1">.png&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Some previous versions of WeasyPrint had a method like this:</span>
<span class="k">def</span> <span class="nf">get_png_pages</span><span class="p">(</span><span class="n">document</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Yield (png_bytes, width, height) tuples.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">pages</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">document</span><span class="o">.</span><span class="n">copy</span><span class="p">([</span><span class="n">page</span><span class="p">])</span><span class="o">.</span><span class="n">write_png</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print the outline of the document.</span>
<span class="c1"># Output on http://www.w3.org/TR/CSS21/intro.html</span>
<span class="c1">#     1. Introduction to CSS 2.1 (page 2)</span>
<span class="c1">#       1. A brief CSS 2.1 tutorial for HTML (page 2)</span>
<span class="c1">#       2. A brief CSS 2.1 tutorial for XML (page 5)</span>
<span class="c1">#       3. The CSS 2.1 processing model (page 6)</span>
<span class="c1">#         1. The canvas (page 7)</span>
<span class="c1">#         2. CSS 2.1 addressing model (page 7)</span>
<span class="c1">#       4. CSS design principles (page 8)</span>
<span class="k">def</span> <span class="nf">print_outline</span><span class="p">(</span><span class="n">bookmarks</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">),</span> <span class="n">children</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bookmarks</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%d</span><span class="s1">. </span><span class="si">%s</span><span class="s1"> (page </span><span class="si">%d</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="n">indent</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">label</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;0123456789. &#39;</span><span class="p">),</span> <span class="n">page</span><span class="p">))</span>
        <span class="n">print_outline</span><span class="p">(</span><span class="n">children</span><span class="p">,</span> <span class="n">indent</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">print_outline</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">make_bookmark_tree</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># PostScript on standard output:</span>
<span class="n">surface</span> <span class="o">=</span> <span class="n">cairo</span><span class="o">.</span><span class="n">PSSurface</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">cairo</span><span class="o">.</span><span class="n">Context</span><span class="p">(</span><span class="n">surface</span><span class="p">)</span>
<span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">pages</span><span class="p">:</span>
    <span class="c1"># 0.75 = 72 PostScript point per inch / 96 CSS pixel per inch</span>
    <span class="n">surface</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.75</span><span class="p">,</span> <span class="n">page</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.75</span><span class="p">)</span>
    <span class="n">page</span><span class="o">.</span><span class="n">paint</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
    <span class="n">surface</span><span class="o">.</span><span class="n">show_page</span><span class="p">()</span>
<span class="n">surface</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="url-fetchers">
<span id="id3"></span><h5>URL fetchers<a class="headerlink" href="#url-fetchers" title="Permalink to this headline">¶</a></h5>
<p>WeasyPrint goes through a <em>URL fetcher</em> to fetch external resources such as
images or CSS stylesheets. The default fetcher can natively open file and
HTTP URLs, but the HTTP client does not support advanced features like cookies
or authentication. This can be worked-around by passing a custom
<code class="docutils literal notranslate"><span class="pre">url_fetcher</span></code> callable to the <code class="xref py py-class docutils literal notranslate"><span class="pre">HTML</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">CSS</span></code> classes.
It must have the same signature as <a class="reference internal" href="index.html#weasyprint.default_url_fetcher" title="weasyprint.default_url_fetcher"><code class="xref py py-func docutils literal notranslate"><span class="pre">default_url_fetcher()</span></code></a>.</p>
<p>Custom fetchers can choose to handle some URLs and defer others
to the default fetcher:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weasyprint</span> <span class="kn">import</span> <span class="n">default_url_fetcher</span><span class="p">,</span> <span class="n">HTML</span>

<span class="k">def</span> <span class="nf">my_fetcher</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;graph:&#39;</span><span class="p">):</span>
        <span class="n">graph_data</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">url</span><span class="p">[</span><span class="mi">6</span><span class="p">:]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="n">generate_graph</span><span class="p">(</span><span class="n">graph_data</span><span class="p">),</span>
                    <span class="n">mime_type</span><span class="o">=</span><span class="s1">&#39;image/png&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">weasyprint</span><span class="o">.</span><span class="n">default_url_fetcher</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;&lt;img src=&quot;graph:42,10.3,87&quot;&gt;&#39;</span>
<span class="n">HTML</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">url_fetcher</span><span class="o">=</span><span class="n">my_fetcher</span><span class="p">)</span><span class="o">.</span><span class="n">write_pdf</span><span class="p">(</span><span class="s1">&#39;out.pdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference external" href="http://packages.python.org/Flask-WeasyPrint/">Flask-WeasyPrint</a> makes use of a custom URL fetcher to integrate WeasyPrint
with a <a class="reference external" href="http://flask.pocoo.org/">Flask</a> application and short-cut the network for resources that are
within the same application.</p>
</div>
<div class="section" id="logging">
<h5>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h5>
<p>Most errors (unsupported CSS property, missing image, …)
are not fatal and will not prevent a document from being rendered.</p>
<p>WeasyPrint uses the <a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.7)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> module from the Python standard library to
log these errors and let you know about them. When WeasyPrint is launched in a
terminal, logged messaged will go to <em>stderr</em> by default. You can change that
by configuring the <code class="docutils literal notranslate"><span class="pre">weasyprint</span></code> logger object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;weasyprint&#39;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="s1">&#39;/path/to/weasyprint.log&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">INFO</span></code> level is used to report the rendering progress. It is useful to
get feedback when WeasyPrint is launched in a terminal (using the <code class="docutils literal notranslate"><span class="pre">--verbose</span></code>
option), or to give this feedback to end users when used as a library. To catch
these logs, you can for example use a filter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="k">class</span> <span class="nc">LoggerFilter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Filter</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">record</span><span class="o">.</span><span class="n">level</span> <span class="o">==</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">record</span><span class="o">.</span><span class="n">getMessage</span><span class="p">())</span>
            <span class="k">return</span> <span class="bp">False</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;weasyprint&#39;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">addFilter</span><span class="p">(</span><span class="n">LoggerFilter</span><span class="p">())</span>
</pre></div>
</div>
<p>See the documentation of the <a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.7)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> module for details.</p>
</div>
</div>
<div class="section" id="weasyprint-tools">
<h4>WeasyPrint Tools<a class="headerlink" href="#weasyprint-tools" title="Permalink to this headline">¶</a></h4>
<p>WeasyPrint provides two very limited tools, helping users to play with
WeasyPrint, test it, and understand how to use it as a library.</p>
<p>These tools are just “toys” and are not intended to be significantly improved
in the future.</p>
<div class="section" id="weasyprint-navigator">
<span id="navigator"></span><h5>WeasyPrint Navigator<a class="headerlink" href="#weasyprint-navigator" title="Permalink to this headline">¶</a></h5>
<p><em>WeasyPrint Navigator</em> is a web browser running in your web browser. Start it
with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python -m weasyprint.tools.navigator
</pre></div>
</div>
<p>… and open your browser at <a class="reference external" href="http://127.0.0.1:5000/">http://127.0.0.1:5000/</a>.</p>
<img alt="_images/weasyprint-navigator.png" src="_images/weasyprint-navigator.png" />
<p>It does not support cookies, forms, or many other things that you would
expect from a “real” browser. It only shows the PNG output from WeasyPrint
with overlaid clickable hyperlinks. It is mostly useful for playing and testing.</p>
</div>
<div class="section" id="weasyprint-renderer">
<span id="renderer"></span><h5>WeasyPrint Renderer<a class="headerlink" href="#weasyprint-renderer" title="Permalink to this headline">¶</a></h5>
<p><em>WeasyPrint Renderer</em> is a web app providing on the same web page a textarea
where you can type an HTML/CSS document, and this document rendered by
WeasyPrint as a PNG image. Start it with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python -m weasyprint.tools.renderer
</pre></div>
</div>
<p>… and open your browser at <a class="reference external" href="http://127.0.0.1:5000/">http://127.0.0.1:5000/</a>.</p>
</div>
</div>
<div class="section" id="security">
<span id="id4"></span><h4>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h4>
<p>When used with untrusted HTMl or untrusted CSS, WeasyPrint can meet security
problems. You will need extra configuration in your Python application to avoid
high memory use, endless renderings or local files leaks.</p>
<p><em>This section has been added thanks to the very useful reports and advice from
Raz Becker.</em></p>
<div class="section" id="long-renderings">
<span id="id5"></span><h5>Long renderings<a class="headerlink" href="#long-renderings" title="Permalink to this headline">¶</a></h5>
<p>WeasyPrint is pretty slow and can take a long time to render long documents or
specially crafted HTML pages.</p>
<p>When WeasyPrint used on a server with HTML or CSS files from untrusted sources,
this problem can lead to very long time renderings, with processes with high
CPU and memory use. Even small documents may lead to really long rendering
times, restricting HTML document size is not enough.</p>
<p>If you use WeasyPrint on a server with HTML or CSS samples coming from
untrusted users, you should:</p>
<ul class="simple">
<li>limit rendering time and memory use of your process, for example using
<code class="docutils literal notranslate"><span class="pre">evil-reload-on-as</span></code> and <code class="docutils literal notranslate"><span class="pre">harakiri</span></code> options if you use uWSGI,</li>
<li>limit memory use at the OS level, for example with <code class="docutils literal notranslate"><span class="pre">ulimit</span></code> on Linux,</li>
<li>automatically kill the process when it uses too much memory or when the
rendering time is too high, by regularly launching a script to do so if no
better option is available,</li>
<li>truncate and sanitize HTML and CSS input to avoid very long documents and
access to external URLs.</li>
</ul>
</div>
<div class="section" id="infinite-requests">
<h5>Infinite requests<a class="headerlink" href="#infinite-requests" title="Permalink to this headline">¶</a></h5>
<p>WeasyPrint can reach files on the network, for example using <code class="docutils literal notranslate"><span class="pre">http://</span></code>
URIs. For various reasons, HTTP requests may take a long time and lead to
problems similar to <a class="reference internal" href="#long-renderings"><span class="std std-ref">Long renderings</span></a>.</p>
<p>WeasyPrint has a default timeout of 10 seconds for HTTP, HTTPS and FTP
resources. This timeout has no effect with other protocols, including access to
<code class="docutils literal notranslate"><span class="pre">file://</span></code> URIs.</p>
<p>If you use WeasyPrint on a server with HTML or CSS samples coming from
untrusted users, or need to reach network resources, you should:</p>
<ul class="simple">
<li>use a custom <a class="reference external" href="url-fetchers">URL fetcher</a>,</li>
<li>follow solutions listed in <a class="reference internal" href="#long-renderings"><span class="std std-ref">Long renderings</span></a>.</li>
</ul>
</div>
<div class="section" id="infinite-loops">
<h5>Infinite loops<a class="headerlink" href="#infinite-loops" title="Permalink to this headline">¶</a></h5>
<p>WeasyPrint has been hit by a large number of bugs, including infinite
loops. Specially crafted HTML and CSS files can quite easily lead to infinite
loops and infinite rendering times.</p>
<p>If you use WeasyPrint on a server with HTML or CSS samples coming from
untrusted users, you should:</p>
<ul class="simple">
<li>follow solutions listed in <a class="reference internal" href="#long-renderings"><span class="std std-ref">Long renderings</span></a>.</li>
</ul>
</div>
<div class="section" id="huge-values">
<h5>Huge values<a class="headerlink" href="#huge-values" title="Permalink to this headline">¶</a></h5>
<p>WeasyPrint doesn’t restrict integer and float values used in CSS. Using huge
values for some properties (page sizes, font sizes, block sizes) can lead to
various problems, including infinite rendering times, huge PDF files, high
memory use and crashes.</p>
<p>This problem is really hard to avoid. Even parsing CSS stylesheets and
searching for huge values is not enough, as it is quite easy to trick CSS
pre-processors using relative units (<code class="docutils literal notranslate"><span class="pre">em</span></code> and <code class="docutils literal notranslate"><span class="pre">%</span></code> for example).</p>
<p>If you use WeasyPrint on a server with HTML or CSS samples coming from
untrusted users, you should:</p>
<ul class="simple">
<li>follow solutions listed in <a class="reference internal" href="#long-renderings"><span class="std std-ref">Long renderings</span></a>.</li>
</ul>
</div>
<div class="section" id="access-to-local-files">
<h5>Access to local files<a class="headerlink" href="#access-to-local-files" title="Permalink to this headline">¶</a></h5>
<p>As any web renderer, WeasyPrint can reach files on the local filesystem using
<code class="docutils literal notranslate"><span class="pre">file://</span></code> URIs. These files can be shown in <code class="docutils literal notranslate"><span class="pre">img</span></code> or <code class="docutils literal notranslate"><span class="pre">embed</span></code> tags for
example.</p>
<p>When WeasyPrint used on a server with HTML or CSS files from untrusted sources,
this feature may be used to know if files are present on the server filesystem,
and to embed them in generated documents.</p>
<p>Unix-like systems also have special local files with infinite size, like
<code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code>. Referencing these files in HTML or CSS files obviously lead
to infinite time renderings.</p>
<p>If you use WeasyPrint on a server with HTML or CSS samples coming from
untrusted users, you should:</p>
<ul class="simple">
<li>restrict your process access to trusted files using sandboxing solutions,</li>
<li>use a custom <a class="reference external" href="url-fetchers">URL fetcher</a> that doesn’t allow <code class="docutils literal notranslate"><span class="pre">file://</span></code>
URLs or filters access depending on given paths.</li>
<li>follow solutions listed in <a class="reference internal" href="#long-renderings"><span class="std std-ref">Long renderings</span></a>.</li>
</ul>
</div>
<div class="section" id="system-information-leaks">
<h5>System information leaks<a class="headerlink" href="#system-information-leaks" title="Permalink to this headline">¶</a></h5>
<p>WeasyPrint relies on many libraries that can leak hardware and software
information. Even when this information looks useless, it can be used by
attackers to exploit other security breaches.</p>
<p>Leaks can include (but are not restricted to):</p>
<ul class="simple">
<li>locally installed fonts (using <code class="docutils literal notranslate"><span class="pre">font-family</span></code> and <code class="docutils literal notranslate"><span class="pre">&#64;font-face</span></code>),</li>
<li>network configuration (IPv4 and IPv6 support, IP addressing, firewall
configuration, using <code class="docutils literal notranslate"><span class="pre">http://</span></code> URIs and tracking time used to render
documents),</li>
<li>hardware and software used for graphical rendering (as Cairo renderings
can change with CPU and GPU features),</li>
<li>Python, Cairo, Pango and other libraries versions (implementation details
lead to different renderings).</li>
</ul>
</div>
<div class="section" id="svg-images">
<h5>SVG images<a class="headerlink" href="#svg-images" title="Permalink to this headline">¶</a></h5>
<p>WeasyPrint relies on <a class="reference external" href="http://cairosvg.org/">CairoSVG</a> to render SVG
files. CairoSVG more or less suffers from the same problems as the ones listed
here for WeasyPrint.</p>
<p>Security advices apply for untrusted SVG files as they apply for untrusted HTML
and CSS documents.</p>
<p>Note that WeasyPrint gives CairoSVG its URL fetcher.</p>
</div>
</div>
<div class="section" id="errors">
<h4>Errors<a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h4>
<p>If you get an exception during rendering, it is probably a bug in WeasyPrint.
Please copy the full traceback and report it on our <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues">issue tracker</a>.</p>
</div>
<div class="section" id="stylesheet-origins">
<span id="id7"></span><h4>Stylesheet origins<a class="headerlink" href="#stylesheet-origins" title="Permalink to this headline">¶</a></h4>
<p>HTML documents are rendered with stylesheets from three <em>origins</em>:</p>
<ul class="simple">
<li>The HTML5 <a class="reference external" href="https://github.com/Kozea/WeasyPrint/blob/master/weasyprint/css/html5_ua.css">user agent stylesheet</a> (defines the default appearance
of HTML elements);</li>
<li>Author stylesheets embedded in the document in <code class="docutils literal notranslate"><span class="pre">&lt;style&gt;</span></code> elements
or linked by <code class="docutils literal notranslate"><span class="pre">&lt;link&nbsp;rel=stylesheet&gt;</span></code> elements;</li>
<li>User stylesheets provided in the API.</li>
</ul>
<p>Keep in mind that <em>user</em> stylesheets have a lower priority than <em>author</em>
stylesheets in the <a class="reference external" href="http://www.w3.org/TR/CSS21/cascade.html#cascading-order">cascade</a>, unless you use <a class="reference external" href="http://www.w3.org/TR/CSS21/cascade.html#important-rules">!important</a> in declarations
to raise their priority.</p>
</div>
</div>
<span id="document-api"></span><div class="section" id="api">
<h3>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h3>
<div class="section" id="api-stability">
<h4>API stability<a class="headerlink" href="#api-stability" title="Permalink to this headline">¶</a></h4>
<p>Everything described here is considered “public”: this is what you can rely
on. We will try to maintain backward-compatibility, although there is no
hard promise until version 1.0.</p>
<p>Anything else should not be used outside of WeasyPrint itself: we reserve
the right to change it or remove it at any point. Use it at your own risk,
or have dependency to a specific WeasyPrint version in your <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>
or <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> file.</p>
</div>
<div class="section" id="command-line-api">
<span id="id1"></span><h4>Command-line API<a class="headerlink" href="#command-line-api" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="weasyprint.__main__.main">
<code class="descclassname">weasyprint.__main__.</code><code class="descname">main</code><span class="sig-paren">(</span><em>argv=sys.argv</em><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.__main__.main" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">weasyprint</span></code> program takes at least two arguments:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>weasyprint <span class="o">[</span>options<span class="o">]</span> &lt;input&gt; &lt;output&gt;
</pre></div>
</div>
<p>The input is a filename or URL to an HTML document, or <code class="docutils literal notranslate"><span class="pre">-</span></code> to read
HTML from stdin. The output is a filename, or <code class="docutils literal notranslate"><span class="pre">-</span></code> to write to stdout.</p>
<p>Options can be mixed anywhere before, between, or after the input and
output:</p>
<dl class="option">
<dt id="cmdoption-e">
<code class="descname">-e</code><code class="descclassname"> &lt;input_encoding&gt;</code><code class="descclassname">, </code><code class="descname">--encoding</code><code class="descclassname"> &lt;input_encoding&gt;</code><a class="headerlink" href="#cmdoption-e" title="Permalink to this definition">¶</a></dt>
<dd><p>Force the input character encoding (e.g. <code class="docutils literal notranslate"><span class="pre">-e</span> <span class="pre">utf8</span></code>).</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-f">
<code class="descname">-f</code><code class="descclassname"> &lt;output_format&gt;</code><code class="descclassname">, </code><code class="descname">--format</code><code class="descclassname"> &lt;output_format&gt;</code><a class="headerlink" href="#cmdoption-f" title="Permalink to this definition">¶</a></dt>
<dd><p>Choose the output file format among PDF and PNG (e.g. <code class="docutils literal notranslate"><span class="pre">-f</span> <span class="pre">png</span></code>).
Required if the output is not a <code class="docutils literal notranslate"><span class="pre">.pdf</span></code> or <code class="docutils literal notranslate"><span class="pre">.png</span></code> filename.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-s">
<code class="descname">-s</code><code class="descclassname"> &lt;filename_or_URL&gt;</code><code class="descclassname">, </code><code class="descname">--stylesheet</code><code class="descclassname"> &lt;filename_or_URL&gt;</code><a class="headerlink" href="#cmdoption-s" title="Permalink to this definition">¶</a></dt>
<dd><p>Filename or URL of a user CSS stylesheet (see
<a class="reference internal" href="index.html#stylesheet-origins"><span class="std std-ref">Stylesheet origins</span></a>) to add to the document
(e.g. <code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">print.css</span></code>). Multiple stylesheets are allowed.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-r">
<code class="descname">-r</code><code class="descclassname"> &lt;dpi&gt;</code><code class="descclassname">, </code><code class="descname">--resolution</code><code class="descclassname"> &lt;dpi&gt;</code><a class="headerlink" href="#cmdoption-r" title="Permalink to this definition">¶</a></dt>
<dd><p>For PNG output only. Set the resolution in PNG pixel per CSS inch.
Defaults to 96, which means that PNG pixels match CSS pixels.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-base-url">
<code class="descname">--base-url</code><code class="descclassname"> &lt;URL&gt;</code><a class="headerlink" href="#cmdoption-base-url" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the base for relative URLs in the HTML input.
Defaults to the input’s own URL, or the current directory for stdin.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-m">
<code class="descname">-m</code><code class="descclassname"> &lt;type&gt;</code><code class="descclassname">, </code><code class="descname">--media-type</code><code class="descclassname"> &lt;type&gt;</code><a class="headerlink" href="#cmdoption-m" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the media type to use for <code class="docutils literal notranslate"><span class="pre">&#64;media</span></code>. Defaults to <code class="docutils literal notranslate"><span class="pre">print</span></code>.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-a">
<code class="descname">-a</code><code class="descclassname"> &lt;file&gt;</code><code class="descclassname">, </code><code class="descname">--attachment</code><code class="descclassname"> &lt;file&gt;</code><a class="headerlink" href="#cmdoption-a" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an attachment to the document.  The attachment is
included in the PDF output.  This option can be used multiple
times.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-p">
<code class="descname">-p</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--presentational-hints</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-p" title="Permalink to this definition">¶</a></dt>
<dd><p>Follow HTML presentational hints.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-version">
<code class="descname">--version</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-version" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the version number. Other options and arguments are ignored.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-h">
<code class="descname">-h</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--help</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-h" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the command-line usage. Other options and arguments are ignored.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-weasyprint"></span></div>
<div class="section" id="python-api">
<span id="id2"></span><h4>Python API<a class="headerlink" href="#python-api" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="weasyprint.HTML">
<em class="property">class </em><code class="descclassname">weasyprint.</code><code class="descname">HTML</code><span class="sig-paren">(</span><em>input</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.HTML" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents an HTML document parsed by html5lib.</p>
<p>You can just create an instance with a positional argument:
<code class="docutils literal notranslate"><span class="pre">doc</span> <span class="pre">=</span> <span class="pre">HTML(something)</span></code>
The class will try to guess if the input is a filename, an absolute URL,
or a file-like object.</p>
<p>Alternatively, use <strong>one</strong> named argument so that no guessing is involved:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> – A filename, relative to the current directory, or
absolute.</li>
<li><strong>url</strong> – An absolute, fully qualified URL.</li>
<li><strong>file_obj</strong> – A file-like: any object with a <code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code> method.</li>
<li><strong>string</strong> – A string of HTML source. (This argument must be named.)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Specifying multiple inputs is an error:
<code class="docutils literal notranslate"><span class="pre">HTML(filename=&quot;foo.html&quot;,</span> <span class="pre">url=&quot;localhost://bar.html&quot;)</span></code>
will raise a TypeError.</p>
<p>You can also pass optional named arguments:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>encoding</strong> – Force the source character encoding.</li>
<li><strong>base_url</strong> – The base used to resolve relative URLs
(e.g. in <code class="docutils literal notranslate"><span class="pre">&lt;img</span> <span class="pre">src=&quot;../foo.png&quot;&gt;</span></code>). If not provided, try to use
the input filename, URL, or <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute of file-like objects.</li>
<li><strong>url_fetcher</strong> – A function or other callable
with the same signature as <a class="reference internal" href="#weasyprint.default_url_fetcher" title="weasyprint.default_url_fetcher"><code class="xref py py-func docutils literal notranslate"><span class="pre">default_url_fetcher()</span></code></a> called to
fetch external resources such as stylesheets and images.
(See <a class="reference internal" href="index.html#url-fetchers"><span class="std std-ref">URL fetchers</span></a>.)</li>
<li><strong>media_type</strong> – The media type to use for <code class="docutils literal notranslate"><span class="pre">&#64;media</span></code>.
Defaults to <code class="docutils literal notranslate"><span class="pre">'print'</span></code>. <strong>Note:</strong> In some cases like
<code class="docutils literal notranslate"><span class="pre">HTML(string=foo)</span></code> relative URLs will be invalid if <code class="docutils literal notranslate"><span class="pre">base_url</span></code>
is not provided.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="weasyprint.HTML.render">
<code class="descname">render</code><span class="sig-paren">(</span><em>stylesheets=None</em>, <em>enable_hinting=False</em>, <em>presentational_hints=False</em>, <em>font_config=None</em><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.HTML.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Lay out and paginate the document, but do not (yet) export it
to PDF or another format.</p>
<p>This returns a <a class="reference internal" href="#weasyprint.document.Document" title="weasyprint.document.Document"><code class="xref py py-class docutils literal notranslate"><span class="pre">Document</span></code></a> object which provides
access to individual pages and various meta-data.
See <a class="reference internal" href="#weasyprint.HTML.write_pdf" title="weasyprint.HTML.write_pdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_pdf()</span></code></a> to get a PDF directly.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.15.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>stylesheets</strong> – An optional list of user stylesheets. List elements are
<a class="reference internal" href="#weasyprint.CSS" title="weasyprint.CSS"><code class="xref py py-class docutils literal notranslate"><span class="pre">CSS</span></code></a> objects, filenames, URLs, or file-like
objects. (See <a class="reference internal" href="index.html#stylesheet-origins"><span class="std std-ref">Stylesheet origins</span></a>.)</li>
<li><strong>enable_hinting</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether text, borders and background should be <em>hinted</em> to fall
at device pixel boundaries. Should be enabled for pixel-based
output (like PNG) but not for vector-based output (like PDF).</li>
<li><strong>presentational_hints</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether HTML presentational hints are
followed.</li>
<li><strong>font_config</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">FontConfiguration</span></code>) – A font configuration handling &#64;font-face rules.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A <a class="reference internal" href="#weasyprint.document.Document" title="weasyprint.document.Document"><code class="xref py py-class docutils literal notranslate"><span class="pre">Document</span></code></a> object.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="weasyprint.HTML.write_pdf">
<code class="descname">write_pdf</code><span class="sig-paren">(</span><em>target=None</em>, <em>stylesheets=None</em>, <em>zoom=1</em>, <em>attachments=None</em>, <em>presentational_hints=False</em>, <em>font_config=None</em><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.HTML.write_pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Render the document to a PDF file.</p>
<p>This is a shortcut for calling <a class="reference internal" href="#weasyprint.HTML.render" title="weasyprint.HTML.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a>, then
<a class="reference internal" href="#weasyprint.document.Document.write_pdf" title="weasyprint.document.Document.write_pdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Document.write_pdf()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>target</strong> – A filename, file-like object, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</li>
<li><strong>stylesheets</strong> – An optional list of user stylesheets. The list’s elements
are <a class="reference internal" href="#weasyprint.CSS" title="weasyprint.CSS"><code class="xref py py-class docutils literal notranslate"><span class="pre">CSS</span></code></a> objects, filenames, URLs, or file-like
objects.  (See <a class="reference internal" href="index.html#stylesheet-origins"><span class="std std-ref">Stylesheet origins</span></a>.)</li>
<li><strong>zoom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The zoom factor in PDF units per CSS units.  <strong>Warning</strong>:
All CSS units are affected, including physical units like
<code class="docutils literal notranslate"><span class="pre">cm</span></code> and named sizes like <code class="docutils literal notranslate"><span class="pre">A4</span></code>.  For values other than
1, the physical CSS units will thus be “wrong”.</li>
<li><strong>attachments</strong> – A list of additional file attachments for the
generated PDF document or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>. The list’s elements are
<code class="xref py py-class docutils literal notranslate"><span class="pre">Attachment</span></code> objects, filenames, URLs or file-like objects.</li>
<li><strong>presentational_hints</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether HTML presentational hints are
followed.</li>
<li><strong>font_config</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">FontConfiguration</span></code>) – A font configuration handling &#64;font-face rules.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The PDF as byte string if <code class="xref py py-obj docutils literal notranslate"><span class="pre">target</span></code> is not provided or
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, otherwise <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (the PDF is written to
<code class="xref py py-obj docutils literal notranslate"><span class="pre">target</span></code>).</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="weasyprint.HTML.write_png">
<code class="descname">write_png</code><span class="sig-paren">(</span><em>target=None</em>, <em>stylesheets=None</em>, <em>resolution=96</em>, <em>presentational_hints=False</em>, <em>font_config=None</em><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.HTML.write_png" title="Permalink to this definition">¶</a></dt>
<dd><p>Paint the pages vertically to a single PNG image.</p>
<p>There is no decoration around pages other than those specified in CSS
with <code class="docutils literal notranslate"><span class="pre">&#64;page</span></code> rules. The final image is as wide as the widest page.
Each page is below the previous one, centered horizontally.</p>
<p>This is a shortcut for calling <a class="reference internal" href="#weasyprint.HTML.render" title="weasyprint.HTML.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a>, then
<a class="reference internal" href="#weasyprint.document.Document.write_png" title="weasyprint.document.Document.write_png"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Document.write_png()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>target</strong> – A filename, file-like object, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</li>
<li><strong>stylesheets</strong> – An optional list of user stylesheets.  The list’s elements
are <a class="reference internal" href="#weasyprint.CSS" title="weasyprint.CSS"><code class="xref py py-class docutils literal notranslate"><span class="pre">CSS</span></code></a> objects, filenames, URLs, or file-like
objects. (See <a class="reference internal" href="index.html#stylesheet-origins"><span class="std std-ref">Stylesheet origins</span></a>.)</li>
<li><strong>resolution</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The output resolution in PNG pixels per CSS inch. At 96 dpi
(the default), PNG pixels match the CSS <code class="docutils literal notranslate"><span class="pre">px</span></code> unit.</li>
<li><strong>presentational_hints</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether HTML presentational hints are
followed.</li>
<li><strong>font_config</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">FontConfiguration</span></code>) – A font configuration handling &#64;font-face rules.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The image as byte string if <code class="xref py py-obj docutils literal notranslate"><span class="pre">target</span></code> is not provided or
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, otherwise <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (the image is written to
<code class="xref py py-obj docutils literal notranslate"><span class="pre">target</span></code>.)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="weasyprint.CSS">
<em class="property">class </em><code class="descclassname">weasyprint.</code><code class="descname">CSS</code><span class="sig-paren">(</span><em>input</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.CSS" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a CSS stylesheet parsed by tinycss2.</p>
<p>An instance is created in the same way as <a class="reference internal" href="#weasyprint.HTML" title="weasyprint.HTML"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTML</span></code></a>, except that
the <code class="docutils literal notranslate"><span class="pre">tree</span></code> argument is not available. All other arguments are the same.</p>
<p>An additional argument called <code class="docutils literal notranslate"><span class="pre">font_config</span></code> must be provided to handle
<code class="docutils literal notranslate"><span class="pre">&#64;font-config</span></code> rules. The same <code class="docutils literal notranslate"><span class="pre">fonts.FontConfiguration</span></code> object must be
used for different <code class="docutils literal notranslate"><span class="pre">CSS</span></code> objects applied to the same document.</p>
<p><code class="docutils literal notranslate"><span class="pre">CSS</span></code> objects have no public attribute or method. They are only meant to
be used in the <a class="reference internal" href="#weasyprint.HTML.write_pdf" title="weasyprint.HTML.write_pdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_pdf()</span></code></a>, <a class="reference internal" href="#weasyprint.HTML.write_png" title="weasyprint.HTML.write_png"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write_png()</span></code></a> and
<a class="reference internal" href="#weasyprint.HTML.render" title="weasyprint.HTML.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a> methods of <a class="reference internal" href="#weasyprint.HTML" title="weasyprint.HTML"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTML</span></code></a> objects.</p>
</dd></dl>

<dl class="function">
<dt id="weasyprint.default_url_fetcher">
<code class="descclassname">weasyprint.</code><code class="descname">default_url_fetcher</code><span class="sig-paren">(</span><em>url</em>, <em>timeout=10</em><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.default_url_fetcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch an external resource such as an image or stylesheet.</p>
<p>Another callable with the same signature can be given as the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">url_fetcher</span></code> argument to <a class="reference internal" href="#weasyprint.HTML" title="weasyprint.HTML"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTML</span></code></a> or <a class="reference internal" href="#weasyprint.CSS" title="weasyprint.CSS"><code class="xref py py-class docutils literal notranslate"><span class="pre">CSS</span></code></a>.
(See <a class="reference internal" href="index.html#url-fetchers"><span class="std std-ref">URL fetchers</span></a>.)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>url</strong> (<em>Unicode string</em>) – The URL of the resource to fetch.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">An exception indicating failure, e.g. <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> on
syntactically invalid URL.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A dict with the following keys:<ul class="simple">
<li>One of <code class="docutils literal notranslate"><span class="pre">string</span></code> (a byte string) or <code class="docutils literal notranslate"><span class="pre">file_obj</span></code>
(a file-like object)</li>
<li>Optionally: <code class="docutils literal notranslate"><span class="pre">mime_type</span></code>, a MIME type extracted e.g. from a
<em>Content-Type</em> header. If not provided, the type is guessed from the
file extension in the URL.</li>
<li>Optionally: <code class="docutils literal notranslate"><span class="pre">encoding</span></code>, a character encoding extracted e.g. from a
<em>charset</em> parameter in a <em>Content-Type</em> header</li>
<li>Optionally: <code class="docutils literal notranslate"><span class="pre">redirected_url</span></code>, the actual URL of the resource
if there were e.g. HTTP redirects.</li>
<li>Optionally: <code class="docutils literal notranslate"><span class="pre">filename</span></code>, the filename of the resource. Usually
derived from the <em>filename</em> parameter in a <em>Content-Disposition</em>
header</li>
</ul>
<p>If a <code class="docutils literal notranslate"><span class="pre">file_obj</span></code> key is given, it is the caller’s responsibility
to call <code class="docutils literal notranslate"><span class="pre">file_obj.close()</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="module-weasyprint.document"></span><dl class="class">
<dt id="weasyprint.document.Document">
<em class="property">class </em><code class="descclassname">weasyprint.document.</code><code class="descname">Document</code><span class="sig-paren">(</span><em>pages</em>, <em>metadata</em>, <em>url_fetcher</em>, <em>font_config</em><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.document.Document" title="Permalink to this definition">¶</a></dt>
<dd><p>A rendered document, with access to individual pages
ready to be painted on any cairo surfaces.</p>
<p>Typically obtained from <a class="reference internal" href="#weasyprint.HTML.render" title="weasyprint.HTML.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HTML.render()</span></code></a>,
but can also be instantiated directly
with a list of <a class="reference internal" href="#weasyprint.document.Page" title="weasyprint.document.Page"><code class="xref py py-class docutils literal notranslate"><span class="pre">pages</span></code></a>,
a set of <a class="reference internal" href="#weasyprint.document.DocumentMetadata" title="weasyprint.document.DocumentMetadata"><code class="xref py py-class docutils literal notranslate"><span class="pre">metadata</span></code></a>, and a <code class="docutils literal notranslate"><span class="pre">url_fetcher</span></code>.</p>
<dl class="attribute">
<dt id="weasyprint.document.Document.pages">
<code class="descname">pages</code><em class="property"> = None</em><a class="headerlink" href="#weasyprint.document.Document.pages" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of <a class="reference internal" href="#weasyprint.document.Page" title="weasyprint.document.Page"><code class="xref py py-class docutils literal notranslate"><span class="pre">Page</span></code></a> objects.</p>
</dd></dl>

<dl class="attribute">
<dt id="weasyprint.document.Document.metadata">
<code class="descname">metadata</code><em class="property"> = None</em><a class="headerlink" href="#weasyprint.document.Document.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#weasyprint.document.DocumentMetadata" title="weasyprint.document.DocumentMetadata"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocumentMetadata</span></code></a> object.
Contains information that does not belong to a specific page
but to the whole document.</p>
</dd></dl>

<dl class="attribute">
<dt id="weasyprint.document.Document.url_fetcher">
<code class="descname">url_fetcher</code><em class="property"> = None</em><a class="headerlink" href="#weasyprint.document.Document.url_fetcher" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="docutils literal notranslate"><span class="pre">url_fetcher</span></code> for resources that have to be read when writing
the output.</p>
</dd></dl>

<dl class="method">
<dt id="weasyprint.document.Document.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><em>pages='all'</em><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.document.Document.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Take a subset of the pages.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pages</strong> – An iterable of <a class="reference internal" href="#weasyprint.document.Page" title="weasyprint.document.Page"><code class="xref py py-class docutils literal notranslate"><span class="pre">Page</span></code></a> objects from <a class="reference internal" href="#weasyprint.document.Document.pages" title="weasyprint.document.Document.pages"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pages</span></code></a>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A new <a class="reference internal" href="#weasyprint.document.Document" title="weasyprint.document.Document"><code class="xref py py-class docutils literal notranslate"><span class="pre">Document</span></code></a> object.</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<p>Write two PDF files for odd-numbered and even-numbered pages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Python lists count from 0 but pages are numbered from 1.</span>
<span class="c1"># [::2] is a slice of even list indexes but odd-numbered pages.</span>
<span class="n">document</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">pages</span><span class="p">[::</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">write_pdf</span><span class="p">(</span><span class="s1">&#39;odd_pages.pdf&#39;</span><span class="p">)</span>
<span class="n">document</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">write_pdf</span><span class="p">(</span><span class="s1">&#39;even_pages.pdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Write each page to a numbred PNG file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">page</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">pages</span><span class="p">):</span>
    <span class="n">document</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">write_png</span><span class="p">(</span><span class="s1">&#39;page_</span><span class="si">%s</span><span class="s1">.png&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>Combine multiple documents into one PDF file,
using metadata from the first:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">all_pages</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">pages</span> <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">documents</span><span class="p">]</span>
<span class="n">documents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">all_pages</span><span class="p">)</span><span class="o">.</span><span class="n">write_pdf</span><span class="p">(</span><span class="s1">&#39;combined.pdf&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="weasyprint.document.Document.resolve_links">
<code class="descname">resolve_links</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.document.Document.resolve_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolve internal hyperlinks.</p>
<p>Links to a missing anchor are removed with a warning.</p>
<p>If multiple anchors have the same name, the first one is used.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A generator yielding lists (one per page) like <code class="xref py py-attr docutils literal notranslate"><span class="pre">Page.links</span></code>,
except that <code class="xref py py-obj docutils literal notranslate"><span class="pre">target</span></code> for internal hyperlinks is
<code class="docutils literal notranslate"><span class="pre">(page_number,</span> <span class="pre">x,</span> <span class="pre">y)</span></code> instead of an anchor name.
The page number is a 0-based index into the <a class="reference internal" href="#weasyprint.document.Document.pages" title="weasyprint.document.Document.pages"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pages</span></code></a> list,
and <code class="docutils literal notranslate"><span class="pre">x,</span> <span class="pre">y</span></code> are in CSS pixels from the top-left of the page.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="weasyprint.document.Document.make_bookmark_tree">
<code class="descname">make_bookmark_tree</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.document.Document.make_bookmark_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a tree of all bookmarks in the document.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a list of bookmark subtrees.
A subtree is <code class="docutils literal notranslate"><span class="pre">(label,</span> <span class="pre">target,</span> <span class="pre">children)</span></code>. <code class="xref py py-obj docutils literal notranslate"><span class="pre">label</span></code> is
a string, <code class="xref py py-obj docutils literal notranslate"><span class="pre">target</span></code> is <code class="docutils literal notranslate"><span class="pre">(page_number,</span> <span class="pre">x,</span> <span class="pre">y)</span></code> like in
<a class="reference internal" href="#weasyprint.document.Document.resolve_links" title="weasyprint.document.Document.resolve_links"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resolve_links()</span></code></a>, and <code class="xref py py-obj docutils literal notranslate"><span class="pre">children</span></code> is a
list of child subtrees.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="weasyprint.document.Document.add_hyperlinks">
<code class="descname">add_hyperlinks</code><span class="sig-paren">(</span><em>links</em>, <em>anchors</em>, <em>context</em>, <em>scale</em><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.document.Document.add_hyperlinks" title="Permalink to this definition">¶</a></dt>
<dd><p>Include hyperlinks in current page.</p>
</dd></dl>

<dl class="method">
<dt id="weasyprint.document.Document.write_pdf">
<code class="descname">write_pdf</code><span class="sig-paren">(</span><em>target=None</em>, <em>zoom=1</em>, <em>attachments=None</em><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.document.Document.write_pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Paint the pages in a PDF file, with meta-data.</p>
<p>PDF files written directly by cairo do not have meta-data such as
bookmarks/outlines and hyperlinks.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>target</strong> – A filename, file-like object, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</li>
<li><strong>zoom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The zoom factor in PDF units per CSS units.  <strong>Warning</strong>:
All CSS units are affected, including physical units like
<code class="docutils literal notranslate"><span class="pre">cm</span></code> and named sizes like <code class="docutils literal notranslate"><span class="pre">A4</span></code>.  For values other than
1, the physical CSS units will thus be “wrong”.</li>
<li><strong>attachments</strong> – A list of additional file attachments for the
generated PDF document or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>. The list’s elements are
<code class="xref py py-class docutils literal notranslate"><span class="pre">Attachment</span></code> objects, filenames, URLs, or file-like objects.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The PDF as byte string if <code class="xref py py-obj docutils literal notranslate"><span class="pre">target</span></code> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, otherwise
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (the PDF is written to <code class="xref py py-obj docutils literal notranslate"><span class="pre">target</span></code>).</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="weasyprint.document.Document.write_png">
<code class="descname">write_png</code><span class="sig-paren">(</span><em>target=None</em>, <em>resolution=96</em><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.document.Document.write_png" title="Permalink to this definition">¶</a></dt>
<dd><p>Paint the pages vertically to a single PNG image.</p>
<p>There is no decoration around pages other than those specified in CSS
with <code class="docutils literal notranslate"><span class="pre">&#64;page</span></code> rules. The final image is as wide as the widest page.
Each page is below the previous one, centered horizontally.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>target</strong> – A filename, file-like object, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</li>
<li><strong>resolution</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The output resolution in PNG pixels per CSS inch. At 96 dpi
(the default), PNG pixels match the CSS <code class="docutils literal notranslate"><span class="pre">px</span></code> unit.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A <code class="docutils literal notranslate"><span class="pre">(png_bytes,</span> <span class="pre">png_width,</span> <span class="pre">png_height)</span></code> tuple. <code class="xref py py-obj docutils literal notranslate"><span class="pre">png_bytes</span></code>
is a byte string if <code class="xref py py-obj docutils literal notranslate"><span class="pre">target</span></code> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, otherwise
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (the image is written to <code class="xref py py-obj docutils literal notranslate"><span class="pre">target</span></code>).
<code class="xref py py-obj docutils literal notranslate"><span class="pre">png_width</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">png_height</span></code> are the size of the
final image, in PNG pixels.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="weasyprint.document.DocumentMetadata">
<em class="property">class </em><code class="descclassname">weasyprint.document.</code><code class="descname">DocumentMetadata</code><span class="sig-paren">(</span><em>title=None</em>, <em>authors=None</em>, <em>description=None</em>, <em>keywords=None</em>, <em>generator=None</em>, <em>created=None</em>, <em>modified=None</em>, <em>attachments=None</em><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.document.DocumentMetadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains meta-information about a <a class="reference internal" href="#weasyprint.document.Document" title="weasyprint.document.Document"><code class="xref py py-class docutils literal notranslate"><span class="pre">Document</span></code></a>
that belongs to the whole document rather than specific pages.</p>
<p>New attributes may be added in future versions of WeasyPrint.</p>
<dl class="attribute">
<dt id="weasyprint.document.DocumentMetadata.title">
<code class="descname">title</code><em class="property"> = None</em><a class="headerlink" href="#weasyprint.document.DocumentMetadata.title" title="Permalink to this definition">¶</a></dt>
<dd><p>The title of the document, as a string or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.
Extracted from the <code class="docutils literal notranslate"><span class="pre">&lt;title&gt;</span></code> element in HTML
and written to the <code class="docutils literal notranslate"><span class="pre">/Title</span></code> info field in PDF.</p>
</dd></dl>

<dl class="attribute">
<dt id="weasyprint.document.DocumentMetadata.authors">
<code class="descname">authors</code><em class="property"> = None</em><a class="headerlink" href="#weasyprint.document.DocumentMetadata.authors" title="Permalink to this definition">¶</a></dt>
<dd><p>The authors of the document as a list of strings.
Extracted from the <code class="docutils literal notranslate"><span class="pre">&lt;meta</span> <span class="pre">name=author&gt;</span></code> elements in HTML
and written to the <code class="docutils literal notranslate"><span class="pre">/Author</span></code> info field in PDF.</p>
</dd></dl>

<dl class="attribute">
<dt id="weasyprint.document.DocumentMetadata.description">
<code class="descname">description</code><em class="property"> = None</em><a class="headerlink" href="#weasyprint.document.DocumentMetadata.description" title="Permalink to this definition">¶</a></dt>
<dd><p>The description of the document, as a string or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.
Extracted from the <code class="docutils literal notranslate"><span class="pre">&lt;meta</span> <span class="pre">name=description&gt;</span></code> element in HTML
and written to the <code class="docutils literal notranslate"><span class="pre">/Subject</span></code> info field in PDF.</p>
</dd></dl>

<dl class="attribute">
<dt id="weasyprint.document.DocumentMetadata.keywords">
<code class="descname">keywords</code><em class="property"> = None</em><a class="headerlink" href="#weasyprint.document.DocumentMetadata.keywords" title="Permalink to this definition">¶</a></dt>
<dd><p>Keywords associated with the document, as a list of strings.
(Defaults to the empty list.)
Extracted from <code class="docutils literal notranslate"><span class="pre">&lt;meta</span> <span class="pre">name=keywords&gt;</span></code> elements in HTML
and written to the <code class="docutils literal notranslate"><span class="pre">/Keywords</span></code> info field in PDF.</p>
</dd></dl>

<dl class="attribute">
<dt id="weasyprint.document.DocumentMetadata.generator">
<code class="descname">generator</code><em class="property"> = None</em><a class="headerlink" href="#weasyprint.document.DocumentMetadata.generator" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of one of the software packages
used to generate the document, as a string or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.
Extracted from the <code class="docutils literal notranslate"><span class="pre">&lt;meta</span> <span class="pre">name=generator&gt;</span></code> element in HTML
and written to the <code class="docutils literal notranslate"><span class="pre">/Creator</span></code> info field in PDF.</p>
</dd></dl>

<dl class="attribute">
<dt id="weasyprint.document.DocumentMetadata.created">
<code class="descname">created</code><em class="property"> = None</em><a class="headerlink" href="#weasyprint.document.DocumentMetadata.created" title="Permalink to this definition">¶</a></dt>
<dd><p>The creation date of the document, as a string or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.
Dates are in one of the six formats specified in
<a class="reference external" href="http://www.w3.org/TR/NOTE-datetime">W3C’s profile of ISO 8601</a>.
Extracted from the <code class="docutils literal notranslate"><span class="pre">&lt;meta</span> <span class="pre">name=dcterms.created&gt;</span></code> element in HTML
and written to the <code class="docutils literal notranslate"><span class="pre">/CreationDate</span></code> info field in PDF.</p>
</dd></dl>

<dl class="attribute">
<dt id="weasyprint.document.DocumentMetadata.modified">
<code class="descname">modified</code><em class="property"> = None</em><a class="headerlink" href="#weasyprint.document.DocumentMetadata.modified" title="Permalink to this definition">¶</a></dt>
<dd><p>The modification date of the document, as a string or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.
Dates are in one of the six formats specified in
<a class="reference external" href="http://www.w3.org/TR/NOTE-datetime">W3C’s profile of ISO 8601</a>.
Extracted from the <code class="docutils literal notranslate"><span class="pre">&lt;meta</span> <span class="pre">name=dcterms.modified&gt;</span></code> element in HTML
and written to the <code class="docutils literal notranslate"><span class="pre">/ModDate</span></code> info field in PDF.</p>
</dd></dl>

<dl class="attribute">
<dt id="weasyprint.document.DocumentMetadata.attachments">
<code class="descname">attachments</code><em class="property"> = None</em><a class="headerlink" href="#weasyprint.document.DocumentMetadata.attachments" title="Permalink to this definition">¶</a></dt>
<dd><p>File attachments as a list of tuples of URL and a description or
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.
Extracted from the <code class="docutils literal notranslate"><span class="pre">&lt;link</span> <span class="pre">rel=attachment&gt;</span></code> elements in HTML
and written to the <code class="docutils literal notranslate"><span class="pre">/EmbeddedFiles</span></code> dictionary in PDF.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="weasyprint.document.Page">
<em class="property">class </em><code class="descclassname">weasyprint.document.</code><code class="descname">Page</code><a class="headerlink" href="#weasyprint.document.Page" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a single rendered page.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.15.</span></p>
</div>
<p>Should be obtained from <a class="reference internal" href="#weasyprint.document.Document.pages" title="weasyprint.document.Document.pages"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Document.pages</span></code></a> but not
instantiated directly.</p>
<dl class="attribute">
<dt id="weasyprint.document.Page.width">
<code class="descname">width</code><em class="property"> = None</em><a class="headerlink" href="#weasyprint.document.Page.width" title="Permalink to this definition">¶</a></dt>
<dd><p>The page width, including margins, in CSS pixels.</p>
</dd></dl>

<dl class="attribute">
<dt id="weasyprint.document.Page.height">
<code class="descname">height</code><em class="property"> = None</em><a class="headerlink" href="#weasyprint.document.Page.height" title="Permalink to this definition">¶</a></dt>
<dd><p>The page height, including margins, in CSS pixels.</p>
</dd></dl>

<dl class="attribute">
<dt id="weasyprint.document.Page.bleed">
<code class="descname">bleed</code><em class="property"> = None</em><a class="headerlink" href="#weasyprint.document.Page.bleed" title="Permalink to this definition">¶</a></dt>
<dd><p>The page bleed width, in CSS pixels.</p>
</dd></dl>

<dl class="method">
<dt id="weasyprint.document.Page.paint">
<code class="descname">paint</code><span class="sig-paren">(</span><em>cairo_context</em>, <em>left_x=0</em>, <em>top_y=0</em>, <em>scale=1</em>, <em>clip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#weasyprint.document.Page.paint" title="Permalink to this definition">¶</a></dt>
<dd><p>Paint the page in cairo, on any type of surface.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cairo_context</strong> – Any <a class="reference external" href="https://cairocffi.readthedocs.io/en/latest/api.html#cairocffi.Context" title="(in cairocffi v0.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cairocffi.Context</span></code></a> object.</li>
<li><strong>left_x</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – X coordinate of the left of the page, in cairo user units.</li>
<li><strong>top_y</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Y coordinate of the top of the page, in cairo user units.</li>
<li><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – Zoom scale in cairo user units per CSS pixel.</li>
<li><strong>clip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to clip/cut content outside the page. If false or
not provided, content can overflow.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<span id="document-features"></span><div class="section" id="features">
<h3>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h3>
<p>This page is for WeasyPrint 43. See <a class="reference internal" href="index.html#document-changelog"><span class="doc">changelog</span></a>
for older versions.</p>
<div class="section" id="urls">
<h4>URLs<a class="headerlink" href="#urls" title="Permalink to this headline">¶</a></h4>
<p>WeasyPrint can read normal files, HTTP, FTP and <a class="reference external" href="http://en.wikipedia.org/wiki/Data_URI_scheme">data URIs</a>. It will follow
HTTP redirects but more advanced features like cookies and authentication
are currently not supported, although a custom <a class="reference internal" href="index.html#url-fetchers"><span class="std std-ref">url fetcher</span></a> can help.</p>
</div>
<div class="section" id="html">
<h4>HTML<a class="headerlink" href="#html" title="Permalink to this headline">¶</a></h4>
<p>Many HTML elements are implemented in CSS through the HTML5
<a class="reference external" href="https://github.com/Kozea/WeasyPrint/blob/master/weasyprint/css/html5_ua.css">User-Agent stylesheet</a>.</p>
<p>Some elements need special treatment:</p>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">&lt;base&gt;</span></code> element, if present, determines the base for relative URLs.</li>
<li>CSS stylesheets can be embedded in <code class="docutils literal notranslate"><span class="pre">&lt;style&gt;</span></code> elements or linked by
<code class="docutils literal notranslate"><span class="pre">&lt;link</span> <span class="pre">rel=stylesheet&gt;</span></code> elements.</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;img&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;embed&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code> elements accept images either
in raster formats supported by <a class="reference external" href="https://live.gnome.org/GdkPixbuf">GdkPixbuf</a> (including PNG, JPEG, GIF, …)
or in SVG with <a class="reference external" href="http://cairosvg.org/">CairoSVG</a>. SVG images are not rasterized but rendered
as vectors in the PDF output.</li>
</ul>
<p>HTML <a class="reference external" href="http://www.w3.org/TR/html5/rendering.html#presentational-hints">presentational hints</a> are not supported by default, but most of them can
be supported:</p>
<ul class="simple">
<li>by using the <code class="docutils literal notranslate"><span class="pre">--presentational-hints</span></code> CLI parameter, or</li>
<li>by setting the <code class="docutils literal notranslate"><span class="pre">presentational_hints</span></code> parameter of the <code class="docutils literal notranslate"><span class="pre">HTML.render</span></code> or
<code class="docutils literal notranslate"><span class="pre">HTML.write_*</span></code> methods to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</li>
</ul>
<p>Presentational hints include a wide array of attributes that direct styling in
HTML, including font <code class="docutils literal notranslate"><span class="pre">color</span></code> and <code class="docutils literal notranslate"><span class="pre">size</span></code>, list attributes like <code class="docutils literal notranslate"><span class="pre">type</span></code> and
<code class="docutils literal notranslate"><span class="pre">start</span></code>, various table alignment attributes, and others. If the document
generated by WeasyPrint is missing some of the features you expect from the
HTML, try to enable this option.</p>
</div>
<div class="section" id="pdf">
<h4>PDF<a class="headerlink" href="#pdf" title="Permalink to this headline">¶</a></h4>
<p>In addition to text, raster and vector graphics, WeasyPrint’s PDF files
can contain hyperlinks, bookmarks and attachments.</p>
<p>Hyperlinks will be clickable in PDF viewers that support them. They can
be either internal, to another part of the same document (eg.
<code class="docutils literal notranslate"><span class="pre">&lt;a</span> <span class="pre">href=&quot;#pdf&quot;&gt;</span></code>) or external, to an URL. External links are resolved
to absolute URLs: <code class="docutils literal notranslate"><span class="pre">&lt;a</span> <span class="pre">href=&quot;/news/&quot;&gt;</span></code> on the WeasyPrint website would always
point to <a class="reference external" href="http://weasyprint.org/news/">http://weasyprint.org/news/</a> in PDF files.</p>
<p>PDF bookmarks are also called outlines and are generally shown in a
sidebar. Clicking on an entry scrolls the matching part of the document
into view. By default all <code class="docutils literal notranslate"><span class="pre">&lt;h1&gt;</span></code> to <code class="docutils literal notranslate"><span class="pre">&lt;h6&gt;</span></code> titles generate bookmarks,
but this can be controlled with CSS (see <a class="reference internal" href="#bookmarks"><span class="std std-ref">Bookmarks</span></a>.)</p>
<p>Attachments are related files, embedded in the PDF itself. They can be
specified through <code class="docutils literal notranslate"><span class="pre">&lt;link</span> <span class="pre">rel=attachment&gt;</span></code> elements to add resources globally
or through regular links with <code class="docutils literal notranslate"><span class="pre">&lt;a</span> <span class="pre">rel=attachment&gt;</span></code> to attach a resource that
can be saved by clicking on said link. The <code class="docutils literal notranslate"><span class="pre">title</span></code> attribute can be used as
description of the attachment.</p>
</div>
<div class="section" id="fonts">
<h4>Fonts<a class="headerlink" href="#fonts" title="Permalink to this headline">¶</a></h4>
<p>WeasyPrint can use any font that Pango can find installed on the system. Fonts
are automatically embedded in PDF files.</p>
<p>On Linux, Pango uses fontconfig to access fonts. You can list the available
fonts thanks to the <code class="docutils literal notranslate"><span class="pre">fc-list</span></code> command, and know which font is matched by a
given pattern thanks to <code class="docutils literal notranslate"><span class="pre">fc-match</span></code>. Copying a font file into the
<code class="docutils literal notranslate"><span class="pre">~/.local/share/fonts</span></code> or <code class="docutils literal notranslate"><span class="pre">~/.fonts</span></code> directory is generally enough to
install a new font. WeasyPrint should support <a class="reference external" href="https://en.wikipedia.org/wiki/FreeType#File_formats">any font format handled by
FreeType</a> (any format
widely used except WOFF2).</p>
<p>On Windows and macOS, <strong>Pango &gt;= 1.38</strong> is required to use fontconfig and
FreeType like it does on Linux.
Both, <code class="docutils literal notranslate"><span class="pre">fc-list</span></code> and <code class="docutils literal notranslate"><span class="pre">fc-match</span></code> probably will be present, too.
Installing new fonts on your system as usual should make them available to Pango.</p>
<p>Otherwise (Pango &lt; 1.38) on Windows and macOS, the native font-managing libraries are used.
You must then use the tools provided by your OS to know which fonts are available.
WeasyPrint should support any font format that’s supported by the operating system.</p>
</div>
<div class="section" id="css">
<h4>CSS<a class="headerlink" href="#css" title="Permalink to this headline">¶</a></h4>
<p>WeasyPrint supports many of the <a class="reference external" href="https://www.w3.org/Style/CSS/current-work">CSS specifications</a> written by the W3C. You
will find in this chapter a comprehensive list of the specifications or drafts
with at least one feature implemented in WeasyPrint.</p>
<p>The results of some of the test suites provided by the W3C are also available
at <a class="reference external" href="http://test.weasyprint.org/">test.weasyprint.org</a>. This website uses a tool called <a class="reference external" href="https://github.com/Kozea/WeasySuite">WeasySuite</a> that
can be useful if you want to implement new features in WeasyPrint.</p>
<div class="section" id="css-level-2-revision-1">
<h5>CSS Level 2 Revision 1<a class="headerlink" href="#css-level-2-revision-1" title="Permalink to this headline">¶</a></h5>
<p>The <a class="reference external" href="http://www.w3.org/TR/CSS21/">CSS Level 2 Revision 1</a> specification, best known as CSS&nbsp;2.1, is pretty
well supported by WeasyPrint. Since version 0.11, it passes the famous <a class="reference external" href="http://www.webstandards.org/files/acid2/test.html">Acid2
Test</a>.</p>
<p>The CSS&nbsp;2.1 features listed here are <strong>not</strong> supported:</p>
<ul class="simple">
<li>The <a class="reference external" href="http://www.w3.org/TR/CSS21/selector.html#first-line-pseudo">::first-line</a> pseudo-element.</li>
<li>On tables: <a class="reference external" href="http://www.w3.org/TR/CSS21/tables.html#dynamic-effects">visibility: collapse</a>.</li>
<li>Minimum and maximum <a class="reference external" href="http://www.w3.org/TR/CSS21/visudet.html#min-max-heights">height</a> on table-related boxes.</li>
<li>Minimum and maximum <a class="reference external" href="http://www.w3.org/TR/CSS21/visudet.html#min-max-widths">width</a> and <a class="reference external" href="http://www.w3.org/TR/CSS21/visudet.html#min-max-heights">height</a> on page-margin boxes.</li>
<li>Conforming <a class="reference external" href="http://www.w3.org/TR/CSS21/fonts.html#algorithm">font matching algorithm</a>. Currently <code class="docutils literal notranslate"><span class="pre">font-family</span></code>
is passed as-is to Pango.</li>
<li>Right-to-left or <a class="reference external" href="http://www.w3.org/TR/CSS21/visuren.html#direction">bi-directional text</a>.</li>
<li><a class="reference external" href="http://www.w3.org/TR/CSS21/ui.html#system-colors">System colors</a> and <a class="reference external" href="http://www.w3.org/TR/CSS21/fonts.html#propdef-font">system fonts</a>. The former are deprecated in <a class="reference external" href="http://www.w3.org/TR/css3-color/">CSS Color
Module Level 3</a>.</li>
</ul>
<p>To the best of our knowledge, everything else that applies to the
print media <strong>is</strong> supported. Please report a bug if you find this list
incomplete.</p>
</div>
<div class="section" id="selectors-level-3">
<h5>Selectors Level 3<a class="headerlink" href="#selectors-level-3" title="Permalink to this headline">¶</a></h5>
<p>With the exceptions noted here, all <a class="reference external" href="http://www.w3.org/TR/css3-selectors/">Selectors Level 3</a> are supported.</p>
<p>PDF is generally not interactive. The <code class="docutils literal notranslate"><span class="pre">:hover</span></code>, <code class="docutils literal notranslate"><span class="pre">:active</span></code>, <code class="docutils literal notranslate"><span class="pre">:focus</span></code>,
<code class="docutils literal notranslate"><span class="pre">:target</span></code> and <code class="docutils literal notranslate"><span class="pre">:visited</span></code> pseudo-classes are accepted as valid but
never match anything.</p>
</div>
<div class="section" id="css-text-module-level-3-4">
<h5>CSS Text Module Level 3 / 4<a class="headerlink" href="#css-text-module-level-3-4" title="Permalink to this headline">¶</a></h5>
<p>The <a class="reference external" href="https://www.w3.org/TR/css-text-3/">CSS Text Module Level 3</a> and <a class="reference external" href="https://www.w3.org/TR/css-text-4/">CSS Text Module Level 4</a> are working
drafts defining “properties for text manipulation” and covering “line breaking,
justification and alignment, white space handling, and text transformation”.</p>
<p>Among their features, some are already included in CSS&nbsp;2.1, sometimes with
missing or different values (<code class="docutils literal notranslate"><span class="pre">text-indent</span></code>, <code class="docutils literal notranslate"><span class="pre">text-align</span></code>,
<code class="docutils literal notranslate"><span class="pre">letter-spacing</span></code>, <code class="docutils literal notranslate"><span class="pre">word-spacing</span></code>, <code class="docutils literal notranslate"><span class="pre">text-transform</span></code>, <code class="docutils literal notranslate"><span class="pre">white-space</span></code>).</p>
<p>New properties defined in Level 3 are supported:</p>
<ul class="simple">
<li>the <code class="docutils literal notranslate"><span class="pre">overflow-wrap</span></code> property replacing <code class="docutils literal notranslate"><span class="pre">word-wrap</span></code>;</li>
<li>the <code class="docutils literal notranslate"><span class="pre">full-width</span></code> value of the <code class="docutils literal notranslate"><span class="pre">text-transform</span></code> property; and</li>
<li>the <code class="docutils literal notranslate"><span class="pre">tab-space</span></code> property.</li>
</ul>
<p><a class="reference external" href="http://www.w3.org/TR/css-2010/#experimental">Experimental</a> properties controling <a class="reference external" href="http://www.w3.org/TR/css3-text/#hyphenation">hyphenation</a> are supported by WeasyPrint:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">hyphens</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">hyphenate-character</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">hyphenate-limit-chars</span></code>, and</li>
<li><code class="docutils literal notranslate"><span class="pre">hyphenate-limit-zone</span></code>.</li>
</ul>
<p>To get automatic hyphenation, you to set it to <code class="docutils literal notranslate"><span class="pre">auto</span></code>
<em>and</em> have the <code class="docutils literal notranslate"><span class="pre">lang</span></code> HTML attribute set to one of the languages
<a class="reference external" href="https://github.com/Kozea/Pyphen/tree/master/pyphen/dictionaries">supported by Pyphen</a>.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">en</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="nt">html</span> <span class="p">{</span> <span class="k">hyphens</span><span class="p">:</span> <span class="kc">auto</span> <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
…
</pre></div>
</div>
<p>Automatic hyphenation can be disabled again with the <code class="docutils literal notranslate"><span class="pre">manual</span></code> value:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">html</span> <span class="p">{</span> <span class="k">hyphens</span><span class="p">:</span> <span class="kc">auto</span> <span class="p">}</span>
<span class="nt">a</span><span class="o">[</span><span class="nt">href</span><span class="o">]</span><span class="p">::</span><span class="nd">after</span> <span class="p">{</span> <span class="k">content</span><span class="p">:</span> <span class="s1">&#39; [&#39;</span> <span class="nb">attr</span><span class="p">(</span><span class="n">href</span><span class="p">)</span> <span class="s1">&#39;]&#39;</span><span class="p">;</span> <span class="k">hyphens</span><span class="p">:</span> <span class="kc">manual</span> <span class="p">}</span>
</pre></div>
</div>
<p>The other features provided by <a class="reference external" href="https://www.w3.org/TR/css-text-3/">CSS Text Module Level 3</a> are <strong>not</strong>
supported:</p>
<ul class="simple">
<li>the <code class="docutils literal notranslate"><span class="pre">line-break</span></code> and <code class="docutils literal notranslate"><span class="pre">word-break</span></code> properties;</li>
<li>the <code class="docutils literal notranslate"><span class="pre">start</span></code>, <code class="docutils literal notranslate"><span class="pre">end</span></code>, <code class="docutils literal notranslate"><span class="pre">match-parent</span></code> and <code class="docutils literal notranslate"><span class="pre">start</span> <span class="pre">end</span></code> values of the
<code class="docutils literal notranslate"><span class="pre">text-align</span></code> property;</li>
<li>the <code class="docutils literal notranslate"><span class="pre">text-align-last</span></code> and <code class="docutils literal notranslate"><span class="pre">text-justify</span></code> properties; and</li>
<li>the <code class="docutils literal notranslate"><span class="pre">text-indent</span></code> and <code class="docutils literal notranslate"><span class="pre">hanging-punctuation</span></code> properties.</li>
</ul>
<p>The other features provided by <a class="reference external" href="https://www.w3.org/TR/css-text-4/">CSS Text Module Level 4</a> are <strong>not</strong>
supported:</p>
<ul class="simple">
<li>the <code class="docutils literal notranslate"><span class="pre">text-space-collapse</span></code> and <code class="docutils literal notranslate"><span class="pre">text-space-trim</span></code> properties;</li>
<li>the <code class="docutils literal notranslate"><span class="pre">text-wrap</span></code>, <code class="docutils literal notranslate"><span class="pre">wrap-before</span></code>, <code class="docutils literal notranslate"><span class="pre">wrap-after</span></code> and <code class="docutils literal notranslate"><span class="pre">wrap-inside</span></code>
properties;</li>
<li>the <code class="docutils literal notranslate"><span class="pre">pre-wrap-auto</span></code> value of the <code class="docutils literal notranslate"><span class="pre">white-space</span></code> property; and</li>
<li>the <code class="docutils literal notranslate"><span class="pre">text-spacing</span></code> property.</li>
</ul>
</div>
<div class="section" id="css-fonts-module-level-3">
<h5>CSS Fonts Module Level 3<a class="headerlink" href="#css-fonts-module-level-3" title="Permalink to this headline">¶</a></h5>
<p>The <a class="reference internal" href="#css-fonts-module-level-3">CSS Fonts Module Level 3</a> is a candidate recommendation describing “how
font properties are specified and how font resources are loaded dynamically”.</p>
<p>WeasyPrint supports the <code class="docutils literal notranslate"><span class="pre">font-size</span></code>, <code class="docutils literal notranslate"><span class="pre">font-stretch</span></code>, <code class="docutils literal notranslate"><span class="pre">font-style</span></code> and
<code class="docutils literal notranslate"><span class="pre">font-weight</span></code> properties, coming from CSS 2.1.</p>
<p>WeasyPrint also supports the following font features added in Level 3:
- <code class="docutils literal notranslate"><span class="pre">font-kerning</span></code>,
- <code class="docutils literal notranslate"><span class="pre">font-variant-ligatures</span></code>,
- <code class="docutils literal notranslate"><span class="pre">font-variant-position</span></code>,
- <code class="docutils literal notranslate"><span class="pre">font-variant-caps</span></code>,
- <code class="docutils literal notranslate"><span class="pre">font-variant-numeric</span></code>,
- <code class="docutils literal notranslate"><span class="pre">font-variant-east-asian</span></code>,
- <code class="docutils literal notranslate"><span class="pre">font-feature-settings</span></code>, and
- <code class="docutils literal notranslate"><span class="pre">font-language-override</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">font-family</span></code> is supported. The string is given to Pango that tries to find a
matching font in a way different from what is defined in the recommendation,
but that should not be a problem for common use.</p>
<p>The shorthand <code class="docutils literal notranslate"><span class="pre">font</span></code> and <code class="docutils literal notranslate"><span class="pre">font-variant</span></code> properties are supported.</p>
<p>WeasyPrint supports the <code class="docutils literal notranslate"><span class="pre">&#64;font-face</span></code> rule, provided that Pango &gt;= 1.38 is installed.</p>
<p>WeasyPrint does <strong>not</strong> support the <code class="docutils literal notranslate"><span class="pre">&#64;font-feature-values</span></code> rule and the
values of <code class="docutils literal notranslate"><span class="pre">font-variant-alternates</span></code> other than <code class="docutils literal notranslate"><span class="pre">normal</span></code> and
<code class="docutils literal notranslate"><span class="pre">historical-forms</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">font-variant-caps</span></code> property is supported but needs the small-caps variant of
the font to be installed. WeasyPrint does <strong>not</strong> simulate missing small-caps
fonts.</p>
</div>
<div class="section" id="css-paged-media-module-level-3">
<h5>CSS Paged Media Module Level 3<a class="headerlink" href="#css-paged-media-module-level-3" title="Permalink to this headline">¶</a></h5>
<p>The <a class="reference external" href="http://dev.w3.org/csswg/css3-page/">CSS Paged Media Module Level 3</a> is a working draft including features for
paged media “describing how:</p>
<ul class="simple">
<li>page breaks are created and avoided;</li>
<li>the page properties such as size, orientation, margins, border, and padding
are specified;</li>
<li>headers and footers are established within the page margins;</li>
<li>content such as page counters are placed in the headers and footers; and</li>
<li>orphans and widows can be controlled.”</li>
</ul>
<p>All the features of this draft are available, including:</p>
<ul class="simple">
<li>the <code class="docutils literal notranslate"><span class="pre">&#64;page</span></code> rule and the <code class="docutils literal notranslate"><span class="pre">:left</span></code>, <code class="docutils literal notranslate"><span class="pre">:right</span></code>, <code class="docutils literal notranslate"><span class="pre">:first</span></code> and <code class="docutils literal notranslate"><span class="pre">:blank</span></code>
selectors;</li>
<li>the page margin boxes;</li>
<li>the page-based counters (with known limitations  <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/93">#93</a>);</li>
<li>the page <code class="docutils literal notranslate"><span class="pre">size</span></code>, <code class="docutils literal notranslate"><span class="pre">bleed</span></code> and <code class="docutils literal notranslate"><span class="pre">marks</span></code> properties;</li>
<li>the named pages.</li>
</ul>
</div>
<div class="section" id="css-generated-content-for-paged-media-module">
<h5>CSS Generated Content for Paged Media Module<a class="headerlink" href="#css-generated-content-for-paged-media-module" title="Permalink to this headline">¶</a></h5>
<p>The <a class="reference external" href="http://www.w3.org/TR/css-gcpm-3/">CSS Generated Content for Paged Media Module</a> (GCPM) is a working draft
defining “new properties and values, so that authors may bring new techniques
(running headers and footers, footnotes, leaders, bookmarks) to paged media”.</p>
<p>Three features from this module have been implemented in WeasyPrint.</p>
<p id="bookmarks">The first feature is <a class="reference external" href="http://www.w3.org/TR/css-gcpm-3/#bookmarks">PDF bookmarks</a>.  Using the <a class="reference external" href="http://www.w3.org/TR/css-2010/#experimental">experimental</a>
<code class="docutils literal notranslate"><span class="pre">bookmark-level</span></code> and <code class="docutils literal notranslate"><span class="pre">bookmark-level</span></code> properties, you can add
bookmarks that will be available in your PDF reader.</p>
<p>Bookmarks have already been added in the WeasyPrint’s <a class="reference external" href="https://github.com/Kozea/WeasyPrint/blob/master/weasyprint/css/html5_ua.css">user agent stylesheet</a>,
so your generated documents will automatically have bookmarks on headers (from
<code class="docutils literal notranslate"><span class="pre">&lt;h1&gt;</span></code> to <code class="docutils literal notranslate"><span class="pre">&lt;h6&gt;</span></code>). But for example, if you have only one top-level <code class="docutils literal notranslate"><span class="pre">&lt;h1&gt;</span></code>
and do not wish to include it in the bookmarks, add this in your stylesheet:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">h1</span> <span class="p">{</span> <span class="k">bookmark-level</span><span class="p">:</span> <span class="kc">none</span> <span class="p">}</span>
</pre></div>
</div>
<p>The second feature is <a class="reference external" href="http://www.w3.org/TR/css-gcpm-3/#named-strings">Named strings</a>. You can define strings related to the
first or last element of a type present on a page, and display these strings in
page borders. This feature is really useful to add the title of the current
chapter at the top of the pages of a book for example.</p>
<p>The named strings can embed static strings, counters, cross-references, tag contents
and tag attributes.</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">@</span><span class="k">top-center</span> <span class="p">{</span> <span class="nt">content</span><span class="o">:</span> <span class="nt">string</span><span class="o">(</span><span class="nt">chapter</span><span class="o">);</span> <span class="p">}</span>
<span class="nt">h2</span> <span class="p">{</span> <span class="k">string-set</span><span class="p">:</span> <span class="n">chapter</span> <span class="s2">&quot;Current chapter: &quot;</span> <span class="nf">content</span><span class="p">()</span> <span class="p">}</span>
</pre></div>
</div>
<p>The third feature is internal <a class="reference external" href="https://www.w3.org/TR/css-gcpm-3/#cross-references">Cross-references</a>,
which makes it possible to retrieve counter or content values from
targets (anchors or ids) in the current document:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">a</span><span class="p">::</span><span class="nd">after</span> <span class="p">{</span>
  <span class="k">content</span><span class="p">:</span> <span class="s2">&quot;, on page &quot;</span> <span class="nf">target-counter</span><span class="p">(</span><span class="nb">attr</span><span class="p">(</span><span class="n">href</span><span class="p">),</span> <span class="kc">page</span><span class="p">);</span>
<span class="p">}</span>
<span class="nt">a</span><span class="p">::</span><span class="nd">after</span> <span class="p">{</span>
  <span class="k">content</span><span class="p">:</span> <span class="s2">&quot;, see &quot;</span> <span class="nf">target-text</span><span class="p">(</span><span class="nb">attr</span><span class="p">(</span><span class="n">href</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In particular, <code class="docutils literal notranslate"><span class="pre">target-counter()</span></code> and <code class="docutils literal notranslate"><span class="pre">target-text()</span></code> are useful when
it comes to tables of contents,
see <a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/652#issuecomment-403276559">an example</a>.</p>
<p>The other features of GCPM are <strong>not</strong> implemented:</p>
<ul class="simple">
<li>running elements (<code class="docutils literal notranslate"><span class="pre">running()</span></code> and <code class="docutils literal notranslate"><span class="pre">element()</span></code>);</li>
<li>footnotes (<code class="docutils literal notranslate"><span class="pre">float:</span> <span class="pre">footnote</span></code>, <code class="docutils literal notranslate"><span class="pre">footnote-display</span></code>, <code class="docutils literal notranslate"><span class="pre">footnote</span></code> counter,
<code class="docutils literal notranslate"><span class="pre">::footnote-call</span></code>, <code class="docutils literal notranslate"><span class="pre">::footnote-marker</span></code>, <code class="docutils literal notranslate"><span class="pre">&#64;footnote</span></code> rule,
<code class="docutils literal notranslate"><span class="pre">footnote-policy</span></code>);</li>
<li>page selectors and page groups (<code class="docutils literal notranslate"><span class="pre">:nth()</span></code> pseudo-class);</li>
<li>leaders (<code class="docutils literal notranslate"><span class="pre">content:</span> <span class="pre">leader()</span></code>);</li>
<li>bookmark states (<code class="docutils literal notranslate"><span class="pre">bookmark-state</span></code>).</li>
</ul>
</div>
<div class="section" id="css-color-module-level-3">
<h5>CSS Color Module Level 3<a class="headerlink" href="#css-color-module-level-3" title="Permalink to this headline">¶</a></h5>
<p>The <a class="reference external" href="http://www.w3.org/TR/css3-color/">CSS Color Module Level 3</a> is a recommendation defining “CSS properties
which allow authors to specify the foreground color and opacity of an
element”. Its main goal is to specify how colors are defined, including color
keywords and the <code class="docutils literal notranslate"><span class="pre">#rgb</span></code>, <code class="docutils literal notranslate"><span class="pre">#rrggbb</span></code>, <code class="docutils literal notranslate"><span class="pre">rgb()</span></code>, <code class="docutils literal notranslate"><span class="pre">rgba()</span></code>, <code class="docutils literal notranslate"><span class="pre">hsl()</span></code>,
<code class="docutils literal notranslate"><span class="pre">hsla()</span></code> syntaxes. Opacity and alpha compositing are also defined in this
document.</p>
<p>This recommendation is fully implemented in WeasyPrint, except the deprecated
System Colors.</p>
</div>
<div class="section" id="css-transforms-module-level-1">
<h5>CSS Transforms Module Level 1<a class="headerlink" href="#css-transforms-module-level-1" title="Permalink to this headline">¶</a></h5>
<p>The <a class="reference external" href="http://dev.w3.org/csswg/css3-transforms/">CSS Transforms Module Level 1</a> working draft “describes a coordinate
system within each element is positioned. This coordinate space can be modified
with the transform property. Using transform, elements can be translated,
rotated and scaled in two or three dimensional space.”</p>
<p>WeasyPrint supports the <code class="docutils literal notranslate"><span class="pre">transform</span></code> and <code class="docutils literal notranslate"><span class="pre">transform-origin</span></code> properties, and
all the 2D transformations (<code class="docutils literal notranslate"><span class="pre">matrix</span></code>, <code class="docutils literal notranslate"><span class="pre">rotate</span></code>, <code class="docutils literal notranslate"><span class="pre">translate(X|Y)?</span></code>,
<code class="docutils literal notranslate"><span class="pre">scale(X|Y)?</span></code>, <code class="docutils literal notranslate"><span class="pre">skew(X|Y)?</span></code>).</p>
<p>WeasyPrint does <strong>not</strong> support the <code class="docutils literal notranslate"><span class="pre">transform-style</span></code>, <code class="docutils literal notranslate"><span class="pre">perspective</span></code>,
<code class="docutils literal notranslate"><span class="pre">perspective-origin</span></code> and <code class="docutils literal notranslate"><span class="pre">backface-visibility</span></code> properties, and all the 3D
transformations (<code class="docutils literal notranslate"><span class="pre">matrix3d</span></code>, <code class="docutils literal notranslate"><span class="pre">rotate(3d|X|Y|Z)</span></code>, <code class="docutils literal notranslate"><span class="pre">translate(3d|Z)</span></code>,
<code class="docutils literal notranslate"><span class="pre">scale(3d|Z)</span></code>).</p>
</div>
<div class="section" id="css-backgrounds-and-borders-module-level-3">
<h5>CSS Backgrounds and Borders Module Level 3<a class="headerlink" href="#css-backgrounds-and-borders-module-level-3" title="Permalink to this headline">¶</a></h5>
<p>The <a class="reference internal" href="#css-backgrounds-and-borders-module-level-3">CSS Backgrounds and Borders Module Level 3</a> is a candidate recommendation
defining properties dealing “with the decoration of the border area and with
the background of the content, padding and border areas”.</p>
<p>The <a class="reference external" href="http://www.w3.org/TR/css3-background/#borders">border part</a> of this module is supported, as it is already included in
the the CSS&nbsp;2.1 specification.</p>
<p>WeasyPrint supports the <a class="reference external" href="http://www.w3.org/TR/css3-background/#backgrounds">background part</a> of this module (allowing multiple
background layers per box), including the <code class="docutils literal notranslate"><span class="pre">background</span></code>, <code class="docutils literal notranslate"><span class="pre">background-color</span></code>,
<code class="docutils literal notranslate"><span class="pre">background-image</span></code>, <code class="docutils literal notranslate"><span class="pre">background-repeat</span></code>, <code class="docutils literal notranslate"><span class="pre">background-attachment</span></code>,
<code class="docutils literal notranslate"><span class="pre">background-position</span></code>, <code class="docutils literal notranslate"><span class="pre">background-clip</span></code>, <code class="docutils literal notranslate"><span class="pre">background-origin</span></code> and
<code class="docutils literal notranslate"><span class="pre">background-size</span></code> properties.</p>
<p>WeasyPrint also supports the <a class="reference external" href="http://www.w3.org/TR/css3-background/#corners">rounded corners part</a> of this module, including
the <code class="docutils literal notranslate"><span class="pre">border-radius</span></code> property.</p>
<p>WeasyPrint does <strong>not</strong> support the <a class="reference external" href="http://www.w3.org/TR/css3-background/#border-images">border images part</a> of this module,
including the <code class="docutils literal notranslate"><span class="pre">border-image</span></code>, <code class="docutils literal notranslate"><span class="pre">border-image-source</span></code>,
<code class="docutils literal notranslate"><span class="pre">border-image-slice</span></code>, <code class="docutils literal notranslate"><span class="pre">border-image-width</span></code>, <code class="docutils literal notranslate"><span class="pre">border-image-outset</span></code> and
<code class="docutils literal notranslate"><span class="pre">border-image-repeat</span></code> properties.</p>
<p>WeasyPrint does <strong>not</strong> support the <a class="reference external" href="http://www.w3.org/TR/css3-background/#misc">box shadow part</a> of this module,
including the <code class="docutils literal notranslate"><span class="pre">box-shadow</span></code> property. This feature has been implemented in a
<a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/149">git branch</a> that is not released, as it relies on raster implementation of
shadows.</p>
</div>
<div class="section" id="css-image-values-and-replaced-content-module-level-3-4">
<h5>CSS Image Values and Replaced Content Module Level 3 / 4<a class="headerlink" href="#css-image-values-and-replaced-content-module-level-3-4" title="Permalink to this headline">¶</a></h5>
<p>The <a class="reference external" href="http://www.w3.org/TR/css3-images/">Image Values and Replaced Content Module Level 3</a> is a candidate
recommendation introducing “additional ways of representing 2D images, for
example as a list of URIs denoting fallbacks, or as a gradient”, defining
“several properties for manipulating raster images and for sizing or
positioning replaced elements” and “generic sizing algorithm for replaced
elements”.</p>
<p>The <a class="reference external" href="http://www.w3.org/TR/css4-images/">Image Values and Replaced Content Module Level 4</a> is a working draft on
the same subject.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">linear-gradient()</span></code>, <code class="docutils literal notranslate"><span class="pre">radial-gradient()</span></code> and
<code class="docutils literal notranslate"><span class="pre">repeating-radial-gradient()</span></code> properties are supported as background images.</p>
<p>The the <code class="docutils literal notranslate"><span class="pre">url()</span></code> notation is supported, but the <code class="docutils literal notranslate"><span class="pre">image()</span></code> notation is
<strong>not</strong> supported for background images.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">from-image</span></code> and <code class="docutils literal notranslate"><span class="pre">snap</span></code> values of the <code class="docutils literal notranslate"><span class="pre">image-resolution</span></code> property are
<strong>not</strong> supported, but the <code class="docutils literal notranslate"><span class="pre">resolution</span></code> value is supported.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">image-rendering</span></code> property is supported.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">image-orientation</span></code>, <code class="docutils literal notranslate"><span class="pre">object-fit</span></code> and <code class="docutils literal notranslate"><span class="pre">object-position</span></code> are <strong>not</strong>
supported.</p>
</div>
<div class="section" id="css-basic-user-interface-module-level-3">
<h5>CSS Basic User Interface Module Level 3<a class="headerlink" href="#css-basic-user-interface-module-level-3" title="Permalink to this headline">¶</a></h5>
<p>The <a class="reference external" href="http://www.w3.org/TR/css-ui-3/">CSS Basic User Interface Module Level 3</a> also known as CSS3&nbsp;UI is a
candidate recommendation describing “CSS properties which enable authors to
style user interface related properties and values.”</p>
<p>Only one new property defined in this document is implemented in WeasyPrint:
the <code class="docutils literal notranslate"><span class="pre">box-sizing</span></code> property.</p>
<p>Some of the properties do not apply for WeasyPrint: <code class="docutils literal notranslate"><span class="pre">cursor</span></code>, <code class="docutils literal notranslate"><span class="pre">resize</span></code>,
<code class="docutils literal notranslate"><span class="pre">caret-color</span></code>, <code class="docutils literal notranslate"><span class="pre">nav-(up|right|down|left)</span></code>.</p>
<p>The other properties are <strong>not</strong> implemented: <code class="docutils literal notranslate"><span class="pre">outline-offset</span></code> and
<code class="docutils literal notranslate"><span class="pre">text-overflow</span></code>.</p>
</div>
<div class="section" id="css-values-and-units-module-level-3">
<h5>CSS Values and Units Module Level 3<a class="headerlink" href="#css-values-and-units-module-level-3" title="Permalink to this headline">¶</a></h5>
<p>The <a class="reference external" href="https://www.w3.org/TR/css3-values/">CSS Values and Units Module Level 3</a> defines various units and
keywords used in “value definition field of each CSS property”.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">initial</span></code> and <code class="docutils literal notranslate"><span class="pre">inherit</span></code> CSS-wide keywords are supported, but the
<code class="docutils literal notranslate"><span class="pre">unset</span></code> keyword is <strong>not</strong> supported.</p>
<p>Quoted strings, URLs and numeric data types are supported.</p>
<p>Font-related lengths (<code class="docutils literal notranslate"><span class="pre">em</span></code>, <code class="docutils literal notranslate"><span class="pre">ex</span></code>, <code class="docutils literal notranslate"><span class="pre">ch</span></code>, <code class="docutils literal notranslate"><span class="pre">rem</span></code>), absolute lengths
(<code class="docutils literal notranslate"><span class="pre">cm</span></code>, <code class="docutils literal notranslate"><span class="pre">mm</span></code>, <code class="docutils literal notranslate"><span class="pre">q</span></code>, <code class="docutils literal notranslate"><span class="pre">in</span></code>, <code class="docutils literal notranslate"><span class="pre">pt</span></code>, <code class="docutils literal notranslate"><span class="pre">pc</span></code>, <code class="docutils literal notranslate"><span class="pre">px</span></code>), angles (<code class="docutils literal notranslate"><span class="pre">rad</span></code>,
<code class="docutils literal notranslate"><span class="pre">grad</span></code>, <code class="docutils literal notranslate"><span class="pre">turn</span></code>, <code class="docutils literal notranslate"><span class="pre">deg</span></code>), resolutions (<code class="docutils literal notranslate"><span class="pre">dpi</span></code>, <code class="docutils literal notranslate"><span class="pre">dpcm</span></code>, <code class="docutils literal notranslate"><span class="pre">dppx</span></code>) are
supported.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">attr()</span></code> functional notation is allowed in the <code class="docutils literal notranslate"><span class="pre">content</span></code> and
<code class="docutils literal notranslate"><span class="pre">string-set</span></code> properties.</p>
<p>Viewport-percentage lengths (<code class="docutils literal notranslate"><span class="pre">vw</span></code>, <code class="docutils literal notranslate"><span class="pre">vh</span></code>, <code class="docutils literal notranslate"><span class="pre">vmin</span></code>, <code class="docutils literal notranslate"><span class="pre">vmax</span></code>) are <strong>not</strong>
supported.</p>
</div>
<div class="section" id="css-multi-column-layout-module">
<h5>CSS Multi-column Layout Module<a class="headerlink" href="#css-multi-column-layout-module" title="Permalink to this headline">¶</a></h5>
<p>The <a class="reference external" href="https://www.w3.org/TR/css3-multicol/">CSS Multi-column Layout Module</a> “describes multi-column layouts in CSS, a
style sheet language for the web. Using functionality described in the
specification, content can be flowed into multiple columns with a gap and a
rule between them.”</p>
<p>Simple multi-column layouts are supported in WeasyPrint. Features such as
constrained height, spanning columns or column breaks are <strong>not</strong>
supported. Pagination and overflow are not seriously tested.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">column-width</span></code> and <code class="docutils literal notranslate"><span class="pre">column-count</span></code> properties, and the <code class="docutils literal notranslate"><span class="pre">columns</span></code>
shorthand property are supported.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">column-gap</span></code>, <code class="docutils literal notranslate"><span class="pre">column-rule-color</span></code>, <code class="docutils literal notranslate"><span class="pre">column-rule-style</span></code> and
<code class="docutils literal notranslate"><span class="pre">column-rule-width</span></code> properties, and the <code class="docutils literal notranslate"><span class="pre">column-rule</span></code> shorthand property
are supported.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">break-before</span></code>, <code class="docutils literal notranslate"><span class="pre">break-after</span></code> and <code class="docutils literal notranslate"><span class="pre">break-inside</span></code> properties are
<strong>not</strong> supported.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">column-span</span></code> property is <strong>not</strong> supported.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">column-fill</span></code> property is supported, with a column balancing algorithm
that should be efficient with simple cases.</p>
</div>
</div>
</div>
<span id="document-hacking"></span><div class="section" id="hacking-weasyprint">
<h3>Hacking WeasyPrint<a class="headerlink" href="#hacking-weasyprint" title="Permalink to this headline">¶</a></h3>
<p>Assuming you already have the <a class="reference internal" href="index.html#document-install"><span class="doc">dependencies</span></a>,
install the <a class="reference external" href="https://github.com/Kozea/WeasyPrint">development version</a> of WeasyPrint:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>git clone git://github.com/Kozea/WeasyPrint.git
<span class="nb">cd</span> WeasyPrint
python3 -m venv env
. env/bin/activate
pip install -e .<span class="o">[</span>doc,test<span class="o">]</span>
weasyprint --help
</pre></div>
</div>
<p>This will install WeasyPrint in “editable” mode (which means that you don’t
need to re-install it every time you make a change in the source code) as well
as <a class="reference external" href="http://pytest.org/">pytest</a> and <a class="reference external" href="http://www.sphinx-doc.org/">Sphinx</a>.</p>
<p>Lastly, in order to pass unit tests, your system must have as default font any
font with a condensed variant (i.e. DejaVu) - typically installable via your
distro’s packaging system.</p>
<div class="section" id="documentation-changes">
<h4>Documentation changes<a class="headerlink" href="#documentation-changes" title="Permalink to this headline">¶</a></h4>
<p>The documentation lives in the <code class="docutils literal notranslate"><span class="pre">docs</span></code> directory,
but API section references docstrings in the source code.
Run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">build_sphinx</span></code> to rebuild the documentation
and get the output in <code class="docutils literal notranslate"><span class="pre">docs/_build/html</span></code>.
The website version is updated automatically when we push to master on GitHub.</p>
</div>
<div class="section" id="code-changes">
<h4>Code changes<a class="headerlink" href="#code-changes" title="Permalink to this headline">¶</a></h4>
<p>Use the <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">test</span></code> command from the <code class="docutils literal notranslate"><span class="pre">WeasyPrint</span></code> directory to
run the test suite.</p>
<p>Please report any bugs/feature requests and submit patches/pull requests
<a class="reference external" href="https://github.com/Kozea/WeasyPrint">on Github</a>.</p>
</div>
<div class="section" id="dive-into-the-source">
<h4>Dive into the source<a class="headerlink" href="#dive-into-the-source" title="Permalink to this headline">¶</a></h4>
<p>The rest of this document is a high-level overview of WeasyPrint’s source
code. For more details, see the various docstrings or even the code itself.
When in doubt, feel free to <a class="reference external" href="http://weasyprint.org/about/">ask</a>!</p>
<p>Much like <a class="reference external" href="http://www.html5rocks.com/en/tutorials/internals/howbrowserswork/#The_main_flow">in web browsers</a>,
the rendering of a document in WeasyPrint goes like this:</p>
<ol class="arabic simple">
<li>The HTML document is fetched and parsed into a tree of elements (like DOM).</li>
<li>CSS stylesheets (either found in the HTML or supplied by the user) are
fetched and parsed.</li>
<li>The stylesheets are applied to the DOM-like tree.</li>
<li>The DOM-like tree with styles is transformed into a <em>formatting structure</em>
made of rectangular boxes.</li>
<li>These boxes are <em>laid-out</em> with fixed dimensions and position onto pages.</li>
<li>For each page, the boxes are re-ordered to observe stacking rules, and are
drawn on a PDF page.</li>
<li>Cairo’s PDF is modified to add metadata such as bookmarks and hyperlinks.</li>
</ol>
<div class="section" id="html">
<h5>HTML<a class="headerlink" href="#html" title="Permalink to this headline">¶</a></h5>
<p>Not much to see here. The <a class="reference internal" href="index.html#weasyprint.HTML" title="weasyprint.HTML"><code class="xref py py-class docutils literal notranslate"><span class="pre">weasyprint.HTML</span></code></a> class handles step 1 and
gives a tree of HTML <em>elements</em>. Although the actual API is different, this
tree is conceptually the same as what web browsers call <em>the DOM</em>.</p>
</div>
<div class="section" id="css">
<h5>CSS<a class="headerlink" href="#css" title="Permalink to this headline">¶</a></h5>
<p>As with HTML, CSS stylesheets are parsed in the <a class="reference internal" href="index.html#weasyprint.CSS" title="weasyprint.CSS"><code class="xref py py-class docutils literal notranslate"><span class="pre">weasyprint.CSS</span></code></a> class
with an external library, <a class="reference external" href="https://pypi.python.org/pypi/tinycss2">tinycss2</a>.</p>
<p>After the In addition to the actual parsing, the <code class="xref py py-mod docutils literal notranslate"><span class="pre">weasyprint.css</span></code> and
<code class="xref py py-mod docutils literal notranslate"><span class="pre">weasyprint.css.validation</span></code> modules do some pre-processing:</p>
<ul class="simple">
<li>Unknown and unsupported declarations are ignored with warnings.
Remaining property values are parsed in a property-specific way
from raw tinycss2 tokens into a higher-level form.</li>
<li>Shorthand properties are expanded. For example, <code class="docutils literal notranslate"><span class="pre">margin</span></code> becomes
<code class="docutils literal notranslate"><span class="pre">margin-top</span></code>, <code class="docutils literal notranslate"><span class="pre">margin-right</span></code>, <code class="docutils literal notranslate"><span class="pre">margin-bottom</span></code> and <code class="docutils literal notranslate"><span class="pre">margin-left</span></code>.</li>
<li>Hyphens in property names are replaced by underscores (<code class="docutils literal notranslate"><span class="pre">margin-top</span></code> becomes
<code class="docutils literal notranslate"><span class="pre">margin_top</span></code>). This transformation is safe since none for the know (not
ignored) properties have an underscore character.</li>
<li>Selectors are pre-compiled with <a class="reference external" href="https://pypi.python.org/pypi/cssselect2">cssselect2</a>.</li>
</ul>
</div>
<div class="section" id="the-cascade">
<h5>The cascade<a class="headerlink" href="#the-cascade" title="Permalink to this headline">¶</a></h5>
<p>After that and still in the <code class="xref py py-mod docutils literal notranslate"><span class="pre">weasyprint.css</span></code> package, the <a class="reference external" href="http://www.w3.org/TR/CSS21/cascade.html">cascade</a>
(that’s the C in CSS!) applies the stylesheets to the element tree.
Selectors associate property declarations to elements. In case of conflicting
declarations (different values for the same property on the same element),
the one with the highest <em>weight</em> wins. Weights are based on the stylesheet’s
<a class="reference internal" href="index.html#stylesheet-origins"><span class="std std-ref">origin</span></a>, <code class="docutils literal notranslate"><span class="pre">!important</span></code> markers, selector
specificity and source order. Missing values are filled in through
<em>inheritance</em> (from the parent element) or the property’s <em>initial value</em>,
so that every element has a <em>specified value</em> for every property.</p>
<p>These <em>specified values</em> are turned into <em>computed values</em> in the
<code class="docutils literal notranslate"><span class="pre">weasyprint.css.computed_values</span></code> module. Keywords and lengths in various
units are converted to pixels, etc. At this point the value for some
properties can be represented by a single number or string, but some require
more complex objects. For example, a <code class="xref py py-class docutils literal notranslate"><span class="pre">Dimension</span></code> object can be either
an absolute length or a percentage.</p>
<p>The final result of the <code class="xref py py-func docutils literal notranslate"><span class="pre">get_all_computed_styles()</span></code>
function is a big dict where keys are <code class="docutils literal notranslate"><span class="pre">(element,</span> <span class="pre">pseudo_element_type)</span></code>
tuples, and keys are style dict objects. Elements are ElementTree elements,
while the type of pseudo-element is a string for eg. <code class="docutils literal notranslate"><span class="pre">::first-line</span></code>
selectors, or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> for “normal” elements. Style dict objects are dicts
mapping property names to the computed values. (The return value is not the
dict itself, but a convenience <code class="xref py py-func docutils literal notranslate"><span class="pre">style_for()</span></code> function for accessing it.)</p>
</div>
<div class="section" id="formatting-structure">
<h5>Formatting structure<a class="headerlink" href="#formatting-structure" title="Permalink to this headline">¶</a></h5>
<p>The <a class="reference external" href="http://www.w3.org/TR/CSS21/visuren.html">visual formatting model</a> explains how <em>elements</em> (from the ElementTree
tree) generate <em>boxes</em> (in the formatting structure). This is step 4 above.
Boxes may have children and thus form a tree, much like elements. This tree is
generally close but not identical to the ElementTree tree: some elements
generate more than one box or none.</p>
<p>Boxes are of a lot of different kinds. For example you should not confuse
<em>block-level boxes</em> and <em>block containers</em>, though <em>block boxes</em> are both.
The <code class="xref py py-mod docutils literal notranslate"><span class="pre">weasyprint.formatting_structure.boxes</span></code> module has a whole hierarchy
of classes to represent all these boxes. We won’t go into the details here,
see the module and class docstrings.</p>
<p>The <code class="xref py py-mod docutils literal notranslate"><span class="pre">weasyprint.formatting_structure.build</span></code> module takes an ElementTree
tree with associated computed styles, and builds a formatting structure. It
generates the right boxes for each element and ensures they conform to the
models rules (eg. an inline box can not contain a block). Each box has a
<code class="xref py py-attr docutils literal notranslate"><span class="pre">style</span></code> attribute containing the style dict of computed values.</p>
<p>The main logic is based on the <code class="docutils literal notranslate"><span class="pre">display</span></code> property, but it can be overridden
for some elements by adding a handler in the <code class="docutils literal notranslate"><span class="pre">weasyprint.html</span></code> module.
This is how <code class="docutils literal notranslate"><span class="pre">&lt;img&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;td</span> <span class="pre">colspan=3&gt;</span></code> are currently implemented,
for example.</p>
<p>This module is rather short as most of HTML is defined in CSS rather than
in Python, in the <a class="reference external" href="https://github.com/Kozea/WeasyPrint/blob/master/weasyprint/css/html5_ua.css">user agent stylesheet</a>.</p>
<p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">build_formatting_structure()</span></code>
function returns the box for the root element (and, through its
<code class="xref py py-attr docutils literal notranslate"><span class="pre">children</span></code> attribute, the whole tree).</p>
</div>
<div class="section" id="layout">
<h5>Layout<a class="headerlink" href="#layout" title="Permalink to this headline">¶</a></h5>
<p>Step 5 is the layout. You could say the everything else is glue code and
this is where the magic happens.</p>
<p>During the layout the document’s content is, well, laid out on pages.
This is when we decide where to do line breaks and page breaks. If a break
happens inside of a box, that box is split into two (or more) boxes in the
layout result.</p>
<p>According to the <a class="reference external" href="http://www.w3.org/TR/CSS21/box.html">box model</a>, each box has rectangular margin, border,
padding and content areas:</p>
<img alt="_images/box_model.png" class="align-center" src="_images/box_model.png" />
<p>While <code class="xref py py-obj docutils literal notranslate"><span class="pre">box.style</span></code> contains computed values, the <a class="reference external" href="http://www.w3.org/TR/CSS21/cascade.html#used-value">used values</a> are set
as attributes of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Box</span></code> object itself during the layout. This
include resolving percentages and especially <code class="docutils literal notranslate"><span class="pre">auto</span></code> values into absolute,
pixel lengths. Once the layout done, each box has used values for
margins, border width, padding of each four sides, as well as the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">width</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">height</span></code> of the content area. They also have
<code class="xref py py-attr docutils literal notranslate"><span class="pre">position_x</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">position_y</span></code>, the absolute coordinates of the
top-left corner of the margin box (<strong>not</strong> the content box) from the top-left
corner of the page.<a class="footnote-reference" href="#id2" id="id1">[1]</a></p>
<p>Boxes also have helpers methods such as <code class="xref py py-meth docutils literal notranslate"><span class="pre">content_box_y()</span></code> and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">margin_width()</span></code> that give other metrics that can be useful in various
parts of the code.</p>
<p>The final result of the layout is a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">PageBox</span></code> objects.</p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>These are the coordinates <em>if</em> no <a class="reference external" href="http://www.w3.org/TR/css3-transforms/">CSS transform</a> applies.
Transforms change the actual location of boxes, but they are applied
later during drawing and do not affect layout.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="stacking-drawing">
<h5>Stacking &amp; Drawing<a class="headerlink" href="#stacking-drawing" title="Permalink to this headline">¶</a></h5>
<p>In step 6, the boxes are reorder by the <code class="xref py py-mod docutils literal notranslate"><span class="pre">weasyprint.stacking</span></code> module
to observe <a class="reference external" href="http://www.w3.org/TR/CSS21/zindex.html">stacking rules</a> such as the <code class="docutils literal notranslate"><span class="pre">z-index</span></code> property.
The result is a tree of <em>stacking contexts</em>.</p>
<p>Next, each laid-out page is <em>drawn</em> onto a <a class="reference external" href="http://cairographics.org/pycairo/">cairo</a> surface. Since each box has
absolute coordinates on the page from the layout step, the logic here should be
minimal. If you find yourself adding a lot of logic here, maybe it should go in
the layout or stacking instead.</p>
<p>The code lives in the <code class="xref py py-mod docutils literal notranslate"><span class="pre">weasyprint.draw</span></code> module.</p>
</div>
<div class="section" id="metadata">
<h5>Metadata<a class="headerlink" href="#metadata" title="Permalink to this headline">¶</a></h5>
<p>Finally (step 7), the <code class="xref py py-mod docutils literal notranslate"><span class="pre">weasyprint.pdf</span></code> module parses (if needed) the PDF
file produced by cairo and adds metadata that cannot be added by cairo:
attachments, embedded files, trim box and bleed box.</p>
</div>
</div>
</div>
<span id="document-changelog"></span><div class="section" id="news">
<h3>News<a class="headerlink" href="#news" title="Permalink to this headline">¶</a></h3>
<div class="section" id="version-43">
<h4>Version 43<a class="headerlink" href="#version-43" title="Permalink to this headline">¶</a></h4>
<p>Released on 2018-11-09.</p>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/726">#726</a>:
Make empty strings clear previous values of named strings</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/729">#729</a>:
Include tools in packaging</li>
</ul>
<p>This version also includes the changes from unstable rc1 and rc2 versions
listed below.</p>
</div>
<div class="section" id="version-43rc2">
<h4>Version 43rc2<a class="headerlink" href="#version-43rc2" title="Permalink to this headline">¶</a></h4>
<p>Released on 2018-11-02.</p>
<p><strong>This version is experimental, don’t use it in production. If you find bugs,
please report them!</strong></p>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/706">#706</a>:
Fix text-indent at the beginning of a page</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/687">#687</a>:
Allow query strings in <a class="reference external" href="file://">file://</a> URIs</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/720">#720</a>:
Optimize minimum size calculation of long inline elements</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/717">#717</a>:
Display &lt;details&gt; tags as blocks</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/691">#691</a>:
Don’t recalculate max content widths when distributing extra space for tables</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/722">#722</a>:
Fix bookmarks and strings set on images</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/723">#723</a>:
Warn users when string() is not used in page margin</li>
</ul>
</div>
<div class="section" id="version-43rc1">
<h4>Version 43rc1<a class="headerlink" href="#version-43rc1" title="Permalink to this headline">¶</a></h4>
<p>Released on 2018-10-15.</p>
<p><strong>This version is experimental, don’t use it in production. If you find bugs,
please report them!</strong></p>
<p>Dependencies:</p>
<ul class="simple">
<li>Python 3.4+ is now needed, Python 2.x is not supported anymore</li>
<li>Cairo 1.15.4+ is now needed, but 1.10+ should work with missing features
(such as links, outlines and metadata)</li>
<li>Pdfrw is not needed anymore</li>
</ul>
<p>New features:</p>
<ul class="simple">
<li><a class="reference external" href="https://weasyprint.org">Beautiful website</a></li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/579">#579</a>:
Initial support of flexbox</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/592">#592</a>:
Support &#64;font-face on Windows</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issue/306">#306</a>:
Add a timeout parameter to the URL fetcher functions</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/594">#594</a>:
Split tests using modern pytest features</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/599">#599</a>:
Make tests pass on Windows</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/604">#604</a>:
Handle target counters and target texts</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/631">#631</a>:
Enable counter-increment and counter-reset in page context</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issue/622">#622</a>:
Allow pathlib.Path objects for HTML, CSS and Attachment classes</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issue/674">#674</a>:
Add extensive installation instructions for Windows</li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/558">#558</a>:
Fix attachments</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/565">#565</a>,
<a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/596">#596</a>,
<a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/539">#539</a>:
Fix many PDF rendering, printing and compatibility problems</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/614">#614</a>:
Avoid crashes and endless loops caused by a Pango bug</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/662">#662</a>:
Fix warnings and errors when generating documentation</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/666">#666</a>,
<a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/685">#685</a>:
Fix many table layout rendering problems</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/680">#680</a>:
Don’t crash when there’s no font available</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/662">#662</a>:
Fix support of some align values in tables</li>
</ul>
</div>
<div class="section" id="version-0-42-3">
<h4>Version 0.42.3<a class="headerlink" href="#version-0-42-3" title="Permalink to this headline">¶</a></h4>
<p>Released on 2018-03-27.</p>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/583">#583</a>:
Fix floating-point number error to fix floating box layout</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/586">#586</a>:
Don’t optimize resume_at when splitting lines with trailing spaces</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/582">#582</a>:
Fix table layout with no overflow</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/580">#580</a>:
Fix inline box breaking function</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/576">#576</a>:
Split replaced_min_content_width and replaced_max_content_width</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/574">#574</a>:
Respect text direction and don’t translate rtl columns twice</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/569">#569</a>:
Get only first line’s width of inline children to get linebox width</li>
</ul>
</div>
<div class="section" id="version-0-42-2">
<h4>Version 0.42.2<a class="headerlink" href="#version-0-42-2" title="Permalink to this headline">¶</a></h4>
<p>Released on 2018-02-04.</p>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/560">#560</a>:
Fix a couple of crashes and endless loops when breaking lines.</li>
</ul>
</div>
<div class="section" id="version-0-42-1">
<h4>Version 0.42.1<a class="headerlink" href="#version-0-42-1" title="Permalink to this headline">¶</a></h4>
<p>Released on 2018-02-01.</p>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/566">#566</a>:
Don’t crash when using &#64;font-config.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/567">#567</a>:
Fix text-indent with text-align: justify.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/465">#465</a>:
Fix string(<a href="#id40"><span class="problematic" id="id41">*</span></a>, start).</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/562">#562</a>:
Handle named pages with pseudo-class.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/507">#507</a>:
Fix running headers.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/557">#557</a>:
Avoid infinite loops in inline_line_width.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/555">#555</a>:
Fix margins, borders and padding in column layouts.</li>
</ul>
</div>
<div class="section" id="version-0-42">
<h4>Version 0.42<a class="headerlink" href="#version-0-42" title="Permalink to this headline">¶</a></h4>
<p>Released on 2017-12-26.</p>
<p>WeasyPrint is not tested with (end-of-life) Python 3.3 anymore.</p>
<p><strong>This release is probably the last version of the 0.x series.</strong></p>
<p>Next version may include big changes:</p>
<ul class="simple">
<li>end of Python 2.7 support,</li>
<li>initial support of bidirectional text,</li>
<li>initial support of flexbox,</li>
<li>improvements for speed and memory usage.</li>
</ul>
<p>New features:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/532">#532</a>:
Support relative file URIs when using CLI.</li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/553">#553</a>:
Fix slow performance for pre-formatted boxes with a lot of children.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/409">#409</a>:
Don’t crash when rendering some tables.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/39">#39</a>:
Fix rendering of floats in inlines.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/301">#301</a>:
Split lines carefully.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/530">#530</a>:
Fix root when frozen with Pyinstaller.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/534">#534</a>:
Handle SVGs containing images embedded as data URIs.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/360">#360</a>:
Fix border-radius rendering problem with some PDF readers.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/525">#525</a>:
Fix pipenv support.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/227">#227</a>:
Smartly handle replaced boxes with percentage width in auto-width parents.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/520">#520</a>:
Don’t ignore CSS &#64;page rules that are imported by an &#64;import rule.</li>
</ul>
</div>
<div class="section" id="version-0-41">
<h4>Version 0.41<a class="headerlink" href="#version-0-41" title="Permalink to this headline">¶</a></h4>
<p>Released on 2017-10-05.</p>
<p>WeasyPrint now depends on pdfrw &gt;= 0.4.</p>
<p>New features:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/471">#471</a>:
Support page marks and bleed.</li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/513">#513</a>:
Don’t crash on unsupported image-resolution values.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/506">#506</a>:
Fix &#64;font-face use with write_* methods.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/500">#500</a>:
Improve readability of _select_source function.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/498">#498</a>:
Use CSS prefixes as recommanded by the CSSWG.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/441">#441</a>:
Fix rendering problems and crashes when using &#64;font-face.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/commit/bb3a4db">bb3a4db</a>:
Try to break pages after a block before trying to break inside it.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/commit/1d1654c">1d1654c</a>:
Fix and test corner cases about named pages.</li>
</ul>
<p>Documentation:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/508">#508</a>:
Add missing libpangocairo dependency for Debian and Ubuntu.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/commit/a7b17fb">a7b17fb</a>:
Add documentation on logged rendering steps.</li>
</ul>
</div>
<div class="section" id="version-0-40">
<h4>Version 0.40<a class="headerlink" href="#version-0-40" title="Permalink to this headline">¶</a></h4>
<p>Released on 2017-08-17.</p>
<p>WeasyPrint now depends on cssselect2 instead of cssselect and lxml.</p>
<p>New features:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/57">#57</a>:
Named pages.</li>
<li>Unprefix properties, see
<a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/498">#498</a>.</li>
<li>Add a “verbose” option logging the document generation steps.</li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/483">#483</a>:
Fix slow performance with long pre-formatted texts.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/70">#70</a>:
Improve speed and memory usage for long documents.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/487">#487</a>:
Don’t crash on local() fonts with a space and no quotes.</li>
</ul>
</div>
<div class="section" id="version-0-39">
<h4>Version 0.39<a class="headerlink" href="#version-0-39" title="Permalink to this headline">¶</a></h4>
<p>Released on 2017-06-24.</p>
<p>Bug fixes:</p>
<ul class="simple">
<li>Fix the use of WeasyPrint’s URL fetcher with CairoSVG.</li>
</ul>
</div>
<div class="section" id="version-0-38">
<h4>Version 0.38<a class="headerlink" href="#version-0-38" title="Permalink to this headline">¶</a></h4>
<p>Released on 2017-06-16.</p>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/477">#477</a>:
Don’t crash on font-face’s src attributes with local functions.</li>
</ul>
</div>
<div class="section" id="version-0-37">
<h4>Version 0.37<a class="headerlink" href="#version-0-37" title="Permalink to this headline">¶</a></h4>
<p>Released on 2017-06-15.</p>
<p>WeasyPrint now depends on tinycss2 instead of tinycss.</p>
<p>New features:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/437">#437</a>:
Support local links in generated PDFs.</li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/412">#412</a>:
Use a NullHandler log handler when WeasyPrint is used as a library.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/417">#417</a>,
<a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/472">#472</a>:
Don’t crash on some line breaks.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/327">#327</a>:
Don’t crash with replaced elements with height set in percentages.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/467">#467</a>:
Remove incorrect line breaks.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/446">#446</a>:
Let the logging module do the string interpolation.</li>
</ul>
</div>
<div class="section" id="version-0-36">
<h4>Version 0.36<a class="headerlink" href="#version-0-36" title="Permalink to this headline">¶</a></h4>
<p>Released on 2017-02-25.</p>
<p>New features:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/407">#407</a>:
Handle ::first-letter.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/423">#423</a>:
Warn user about broken cairo versions.</li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/411">#411</a>:
Typos fixed in command-line help.</li>
</ul>
</div>
<div class="section" id="version-0-35">
<h4>Version 0.35<a class="headerlink" href="#version-0-35" title="Permalink to this headline">¶</a></h4>
<p>Released on 2017-02-25.</p>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/410">#410</a>:
Fix AssertionError in split_text_box.</li>
</ul>
</div>
<div class="section" id="version-0-34">
<h4>Version 0.34<a class="headerlink" href="#version-0-34" title="Permalink to this headline">¶</a></h4>
<p>Released on 2016-12-21.</p>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/398">#398</a>:
Honor the presentational_hints option for PDFs.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/399">#399</a>:
Avoid CairoSVG-2.0.0rc* on Python 2.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/396">#396</a>:
Correctly close files open by mkstemp.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/403">#403</a>:
Cast the number of columns into int.</li>
<li>Fix multi-page multi-columns and add related tests.</li>
</ul>
</div>
<div class="section" id="version-0-33">
<h4>Version 0.33<a class="headerlink" href="#version-0-33" title="Permalink to this headline">¶</a></h4>
<p>Released on 2016-11-28.</p>
<p>New features:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/393">#393</a>:
Add tests on MacOS.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/370">#370</a>:
Enable &#64;font-face on MacOS.</li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/389">#389</a>:
Always update resume_at when splitting lines.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/394">#394</a>:
Don’t build universal wheels.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/388">#388</a>:
Fix logic when finishing block formatting context.</li>
</ul>
</div>
<div class="section" id="version-0-32">
<h4>Version 0.32<a class="headerlink" href="#version-0-32" title="Permalink to this headline">¶</a></h4>
<p>Released on 2016-11-17.</p>
<p>New features:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/28">#28</a>:
Support &#64;font-face on Linux.</li>
<li>Support CSS fonts level 3 almost entirely, including OpenType features.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/253">#253</a>:
Support presentational hints (optional).</li>
<li>Support break-after, break-before and break-inside for pages and columns.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/384">#384</a>:
Major performance boost.</li>
</ul>
<p>Bux fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/368">#368</a>:
Respect white-space for shrink-to-fit.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/382">#382</a>:
Fix the preferred width for column groups.</li>
<li>Handle relative boxes in column-layout boxes.</li>
</ul>
<p>Documentation:</p>
<ul class="simple">
<li>Add more and more documentation about Windows installation.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/355">#355</a>:
Add fonts requirements for tests.</li>
</ul>
</div>
<div class="section" id="version-0-31">
<h4>Version 0.31<a class="headerlink" href="#version-0-31" title="Permalink to this headline">¶</a></h4>
<p>Released on 2016-08-28.</p>
<p>New features:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/124">#124</a>:
Add MIME sniffing for images.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/60">#60</a>:
CSS Multi-column Layout.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/197">#197</a>:
Add hyphens at line breaks activated by a soft hyphen.</li>
</ul>
<p>Bux fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/132">#132</a>:
Fix Python 3 compatibility on Windows.</li>
</ul>
<p>Documentation:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/329">#329</a>:
Add documentation about installation on Windows.</li>
</ul>
</div>
<div class="section" id="version-0-30">
<h4>Version 0.30<a class="headerlink" href="#version-0-30" title="Permalink to this headline">¶</a></h4>
<p>Released on 2016-07-18.</p>
<p>WeasyPrint now depends on html5lib-0.999999999.</p>
<p>Bux fixes:</p>
<ul class="simple">
<li>Fix Acid2</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/325">#325</a>:
Cutting lines is broken in page margin boxes.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/334">#334</a>:
Newest html5lib 0.999999999 breaks rendering.</li>
</ul>
</div>
<div class="section" id="version-0-29">
<h4>Version 0.29<a class="headerlink" href="#version-0-29" title="Permalink to this headline">¶</a></h4>
<p>Released on 2016-06-17.</p>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/263">#263</a>:
Don’t crash with floats with percents in positions.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/323">#323</a>:
Fix CairoSVG 2.0 pre-release dependency in Python 2.x.</li>
</ul>
</div>
<div class="section" id="version-0-28">
<h4>Version 0.28<a class="headerlink" href="#version-0-28" title="Permalink to this headline">¶</a></h4>
<p>Released on 2016-05-16.</p>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/189">#189</a>:
<code class="docutils literal notranslate"><span class="pre">white-space:</span> <span class="pre">nowrap</span></code> still wraps on hyphens</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/305">#305</a>:
Fix crashes on some tables</li>
<li>Don’t crash when transform matrix isn’t invertible</li>
<li>Don’t crash when rendering ratio-only SVG images</li>
<li>Fix margins and borders on some tables</li>
</ul>
</div>
<div class="section" id="version-0-27">
<h4>Version 0.27<a class="headerlink" href="#version-0-27" title="Permalink to this headline">¶</a></h4>
<p>Released on 2016-04-08.</p>
<p>New features:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/295">#295</a>:
Support the ‘rem’ unit.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/299">#299</a>:
Enhance the support of SVG images.</li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/307">#307</a>:
Fix the layout of cells larger than their tables.</li>
</ul>
<p>Documentation:</p>
<ul class="simple">
<li>The website is now on GitHub Pages, the documentation is on Read the Docs.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/297">#297</a>:
Rewrite the CSS chapter of the documentation.</li>
</ul>
</div>
<div class="section" id="version-0-26">
<h4>Version 0.26<a class="headerlink" href="#version-0-26" title="Permalink to this headline">¶</a></h4>
<p>Released on 2016-01-29.</p>
<p>New features:</p>
<ul class="simple">
<li>Support the <cite>empty-cells</cite> attribute.</li>
<li>Respect table, column and cell widths.</li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/172">#172</a>:
Unable to set table column width on tables td’s.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/151">#151</a>:
Table background colour bleeds beyond table cell boundaries.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/260">#260</a>:
TypeError: unsupported operand type(s) for +: ‘float’ and ‘str’.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/288">#288</a>:
Unwanted line-breaks in bold text.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/286">#286</a>:
AttributeError: ‘Namespace’ object has no attribute ‘attachments’.</li>
</ul>
</div>
<div class="section" id="version-0-25">
<h4>Version 0.25<a class="headerlink" href="#version-0-25" title="Permalink to this headline">¶</a></h4>
<p>Released on 2015-12-17.</p>
<p>New features:</p>
<ul class="simple">
<li>Support the ‘q’ unit.</li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/285">#285</a>:
Fix a crash happening when splitting lines.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/284">#284</a>:
Escape parenthesis in PDF links.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/280">#280</a>:
Replace utf8 with utf-8 for gettext/django compatibility.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/269">#269</a>:
Add support for use when frozen.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/250">#250</a>:
Don’t crash when attachments are not available.</li>
</ul>
</div>
<div class="section" id="version-0-24">
<h4>Version 0.24<a class="headerlink" href="#version-0-24" title="Permalink to this headline">¶</a></h4>
<p>Released on 2015-08-04.</p>
<p>New features:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/174">#174</a>:
Basic support for Named strings.</li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/207">#207</a>:
Draw rounded corners on replaced boxes.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/224">#224</a>:
Rely on the font size for rounding bug workaround.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/31">#31</a>:
Honor the vertical-align property in fixed-height cells.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/202">#202</a>:
Remove unreachable area/border at bottom of page.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/225">#225</a>:
Don’t allow unknown units during line-height validation.</li>
<li>Fix some wrong conflict resolutions for table borders with inset
and outset styles.</li>
</ul>
</div>
<div class="section" id="version-0-23">
<h4>Version 0.23<a class="headerlink" href="#version-0-23" title="Permalink to this headline">¶</a></h4>
<p>Released on 2014-09-16.</p>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/196">#196</a>:
Use the default image sizing algorithm for images’s preferred size.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/194">#194</a>:
Try more library aliases with <code class="docutils literal notranslate"><span class="pre">dlopen()</span></code>.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/201">#201</a>:
Consider <code class="docutils literal notranslate"><span class="pre">page-break-after-avoid</span></code> when pushing floats to the next page.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/217">#217</a>:
Avoid a crash on zero-sized background images.</li>
</ul>
<p>Release process:</p>
<ul class="simple">
<li>Start testing on Python 3.4 on Travis-CI.</li>
</ul>
</div>
<div class="section" id="version-0-22">
<h4>Version 0.22<a class="headerlink" href="#version-0-22" title="Permalink to this headline">¶</a></h4>
<p>Released on 2014-05-05.</p>
<p>New features:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/86">#86</a>:
Support gzip and deflate encoding in HTTP responses</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/177">#177</a>:
Support for PDF attachments.</li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/169">#169</a>:
Fix a crash on percentage-width columns in an auto-width table.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/168">#168</a>:
Make <code class="docutils literal notranslate"><span class="pre">&lt;fieldset&gt;</span></code> a block in the user-agent stylesheet.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/175">#175</a>:
Fix some <code class="docutils literal notranslate"><span class="pre">dlopen()</span></code> library loading issues on OS X.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/183">#183</a>:
Break to the next page before a float that would overflow the page.
(It might still overflow if it’s bigger than the page.)</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/188">#188</a>:
Require a recent enough version of Pyphen</li>
</ul>
<p>Release process:</p>
<ul class="simple">
<li>Drop Python 3.1 support.</li>
<li>Set up [Travis CI](<a class="reference external" href="http://travis-ci.org/">http://travis-ci.org/</a>)
to automatically test all pushes and pull requests.</li>
<li>Start testing on Python 3.4 locally. (Travis does not support 3.4 yet.)</li>
</ul>
</div>
<div class="section" id="version-0-21">
<h4>Version 0.21<a class="headerlink" href="#version-0-21" title="Permalink to this headline">¶</a></h4>
<p>Released on 2014-01-11.</p>
<p>New features:</p>
<ul class="simple">
<li>Add the <a class="reference external" href="http://dev.w3.org/csswg/css-text/#overflow-wrap">overflow-wrap</a>
property, allowing line breaks inside otherwise-unbreakable words.
Thanks Frédérick Deslandes!</li>
<li>Add the <a class="reference external" href="http://dev.w3.org/csswg/css-images-3/#the-image-resolution">image-resolution</a> property,
allowing images to be sized proportionally to their intrinsic size
at a resolution other than 96 image pixels per CSS <code class="docutils literal notranslate"><span class="pre">in</span></code>
(ie. one image pixel per CSS <code class="docutils literal notranslate"><span class="pre">px</span></code>)</li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/145">#145</a>:
Fix parsing HTML from an HTTP URL on Python 3.x</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/40">#40</a>:
Use more general hyphenation dictionnaries for specific document languages.
(E.g. use <code class="docutils literal notranslate"><span class="pre">hyph_fr.dic</span></code> for <code class="docutils literal notranslate"><span class="pre">lang=&quot;fr_FR&quot;</span></code>.)</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/26">#26</a>:
Fix <code class="docutils literal notranslate"><span class="pre">min-width</span></code> and <code class="docutils literal notranslate"><span class="pre">max-width</span></code> on floats.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/100">#100</a>:
Fix a crash on trailing whitespace with <code class="docutils literal notranslate"><span class="pre">font-size:</span> <span class="pre">0</span></code></li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/82">#82</a>:
Borders on tables with <code class="docutils literal notranslate"><span class="pre">border-collapse:</span> <span class="pre">collapse</span></code> were sometimes
drawn at an incorrect position.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/30">#30</a>:
Fix positioning of images with <code class="docutils literal notranslate"><span class="pre">position:</span> <span class="pre">absolute</span></code>.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/118">#118</a>:
Fix a crash when using <code class="docutils literal notranslate"><span class="pre">position:</span> <span class="pre">absolute</span></code>
inside a <code class="docutils literal notranslate"><span class="pre">position:</span> <span class="pre">relative</span></code> element.</li>
<li>Fix <code class="docutils literal notranslate"><span class="pre">visibility:</span> <span class="pre">collapse</span></code> to behave like <code class="docutils literal notranslate"><span class="pre">visibility:</span> <span class="pre">hidden</span></code>
on elements other than table rows and table columns.</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/147">#147</a> and
<a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/153">#153</a>:
Fix dependencies to require lxml 3.0 or a more recent version.
Thanks gizmonerd and Thomas Grainger!</li>
<li><a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/152">#152</a>:
Fix a crash on percentage-sized table cells in auto-sized tables.
Thanks Johannes Duschl!</li>
</ul>
</div>
<div class="section" id="version-0-20-2">
<h4>Version 0.20.2<a class="headerlink" href="#version-0-20-2" title="Permalink to this headline">¶</a></h4>
<p>Released on 2013-12-18.</p>
<ul class="simple">
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/146">#146</a>: don’t crash
when drawing really small boxes with dotted/dashed borders</li>
</ul>
</div>
<div class="section" id="version-0-20-1">
<h4>Version 0.20.1<a class="headerlink" href="#version-0-20-1" title="Permalink to this headline">¶</a></h4>
<p>Released on 2013-12-16.</p>
<ul class="simple">
<li>Depend on html5lib &gt;= 0.99 instead of 1.0b3 to fix pip 1.4 support.</li>
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/74">#74</a>: don’t crash on
space followed by dot at line break.</li>
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/78">#78</a>: nicer colors for
border-style: ridge/groove/inset/outset.</li>
</ul>
</div>
<div class="section" id="version-0-20">
<h4>Version 0.20<a class="headerlink" href="#version-0-20" title="Permalink to this headline">¶</a></h4>
<p>Released on 2013-12-14.</p>
<ul class="simple">
<li>Add support for <code class="docutils literal notranslate"><span class="pre">border-radius</span></code>.</li>
<li>Feature <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/77">#77</a>: Add PDF
metadata from HTML.</li>
<li>Feature <a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/12">#12</a>: Use html5lib.</li>
<li>Tables: handle percentages for column groups, columns and cells, and values
for row height.</li>
<li>Bug fixes:<ul>
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/pull/84">#84</a>: don’t crash when
stylesheets are not available.</li>
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/101">#101</a>: use page ids
instead of page numbers in PDF bookmarks.</li>
<li>Use <code class="docutils literal notranslate"><span class="pre">logger.warning</span></code> instead of deprecated <code class="docutils literal notranslate"><span class="pre">logger.warn</span></code>.</li>
<li>Add ‘font-stretch’ in the ‘font’ shorthand.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="version-0-19-2">
<h4>Version 0.19.2<a class="headerlink" href="#version-0-19-2" title="Permalink to this headline">¶</a></h4>
<p>Released on 2013-06-18.</p>
<p>Bug fix release:</p>
<ul class="simple">
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/88">#88</a>:
<code class="docutils literal notranslate"><span class="pre">text-decoration:</span> <span class="pre">overline</span></code> not being drawn above the text</li>
<li>Bug fix: Actually draw multiple lines when multiple values are given
to <code class="docutils literal notranslate"><span class="pre">text-decoration</span></code>.</li>
<li>Use the font metrics for text decoration positioning.</li>
<li>Bug fix: Don’t clip the border with <code class="docutils literal notranslate"><span class="pre">overflow:</span> <span class="pre">hidden</span></code>.</li>
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/99">#99</a>:
Regression: JPEG images not loading with cairo 1.8.x.</li>
</ul>
</div>
<div class="section" id="version-0-19-1">
<h4>Version 0.19.1<a class="headerlink" href="#version-0-19-1" title="Permalink to this headline">¶</a></h4>
<p>Released on 2013-04-30.</p>
<p>Bug fix release:</p>
<ul class="simple">
<li>Fix incorrect intrinsic width calculation
leading to unnecessary line breaks in floats, tables, etc.</li>
<li>Tweak border painting to look better</li>
<li>Fix unnecessary page break before big tables.</li>
<li>Fix table row overflowing at the bottom of the page
when there are margins above the table.</li>
<li>Fix <code class="docutils literal notranslate"><span class="pre">position:</span> <span class="pre">fixed</span></code> to actually repeat on every page.</li>
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/76">#76</a>:
repeat <code class="docutils literal notranslate"><span class="pre">&lt;thead&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;tfoot&gt;</span></code> elements on every page,
even with table border collapsing.</li>
</ul>
</div>
<div class="section" id="version-0-19">
<h4>Version 0.19<a class="headerlink" href="#version-0-19" title="Permalink to this headline">¶</a></h4>
<p>Released on 2013-04-18.</p>
<ul class="simple">
<li>Add support for <code class="docutils literal notranslate"><span class="pre">linear-gradient()</span></code> and <code class="docutils literal notranslate"><span class="pre">radial-gradient</span></code>
in background images.</li>
<li>Add support for the <code class="docutils literal notranslate"><span class="pre">ex</span></code> and <code class="docutils literal notranslate"><span class="pre">ch</span></code> length units.
(<code class="docutils literal notranslate"><span class="pre">1ex</span></code> is based on the font instead of being always <code class="docutils literal notranslate"><span class="pre">0.5em</span></code> as before.)</li>
<li>Add experimental support for Level 4 hyphenation properties.</li>
<li>Drop support for CFFI &lt; 0.6 and cairocffi &lt; 0.4.</li>
<li>Many bug fixes, including:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/54">#54</a>:
min/max-width/height on block-level images.</li>
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/71">#71</a>:
Crash when parsing nested functional notation.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="version-0-18">
<h4>Version 0.18<a class="headerlink" href="#version-0-18" title="Permalink to this headline">¶</a></h4>
<p>Released on 2013-03-30.</p>
<ul class="simple">
<li>Add support for Level 3 backgrounds,
including multiple background layers per element/box.</li>
<li>Forward-compatibility with (future releases of) cairocffi 0.4+ and CFFI 0.6+.</li>
<li>Bug fixes:<ul>
<li>Avoid some unnecessary line breaks
for elements sized based on their content (aka. “shrink-to-fit”)
such as floats and page headers.</li>
<li>Allow page breaks between empty blocks.</li>
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/66">#66</a>:
Resolve images’ auto width from non-auto height and intrinsic ratio.</li>
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/21">#21</a>:
The <code class="docutils literal notranslate"><span class="pre">data:</span></code> URL scheme is case-insensitive.</li>
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/53">#53</a>:
Crash when backtracking for <code class="docutils literal notranslate"><span class="pre">break-before/after:</span> <span class="pre">avoid</span></code>.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="version-0-17-1">
<h4>Version 0.17.1<a class="headerlink" href="#version-0-17-1" title="Permalink to this headline">¶</a></h4>
<p>Released on 2013-03-18.</p>
<p>Bug fixes:</p>
<ul class="simple">
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/41">#41</a>:
GObject initialization when GDK-PixBuf is not installed.</li>
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/42">#42</a>:
absolute URLs without a base URL (ie. document parsed from a string.)</li>
<li>Fix some whitespace collapsing bugs.</li>
<li>Fix absolutely-positioned elements inside inline elements.</li>
<li>Fix URL escaping of image references from CSS.</li>
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/49">#49</a>:
Division by 0 on dashed or dotted border smaller than one dot/dash.</li>
<li>Fix <a class="reference external" href="https://github.com/Kozea/WeasyPrint/issues/44">#44</a>:
bad interaction of <code class="docutils literal notranslate"><span class="pre">page-break-before/after:</span> <span class="pre">avoid</span></code> and floats.</li>
</ul>
</div>
<div class="section" id="version-0-17">
<h4>Version 0.17<a class="headerlink" href="#version-0-17" title="Permalink to this headline">¶</a></h4>
<p>Released on 2013-02-27.</p>
<ul class="simple">
<li>Added <a class="reference external" href="https://weasyprint.readthedocs.io/en/latest/features.html#css-text-module-level-3-4">text hyphenation</a> with the <code class="docutils literal notranslate"><span class="pre">-weasy-hyphens</span></code> property.</li>
<li>When a document includes JPEG images, embed them as JPEG in the PDF output.
This often results in smaller PDF file size
compared to the default <em>deflate</em> compression.</li>
<li>Switched to using CFFI instead of PyGTK or PyGObject-introspection.</li>
<li>Layout bug fixes:<ul>
<li>Correctly trim whitespace at the end of lines.</li>
<li>Fix some cases with floats within inline content.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="version-0-16">
<h4>Version 0.16<a class="headerlink" href="#version-0-16" title="Permalink to this headline">¶</a></h4>
<p>Released on 2012-12-13.</p>
<ul class="simple">
<li>Add the <code class="xref py py-obj docutils literal notranslate"><span class="pre">zoom</span></code> parameter to <a class="reference internal" href="index.html#weasyprint.HTML.write_pdf" title="weasyprint.HTML.write_pdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HTML.write_pdf()</span></code></a> and
<a class="reference internal" href="index.html#weasyprint.document.Document.write_pdf" title="weasyprint.document.Document.write_pdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Document.write_pdf()</span></code></a></li>
<li>Fix compatibility with old (and buggy) pycairo versions.
WeasyPrint is now tested on 1.8.8 in addition to the latest.</li>
<li>Fix layout bugs related to line trailing spaces.</li>
</ul>
</div>
<div class="section" id="version-0-15">
<h4>Version 0.15<a class="headerlink" href="#version-0-15" title="Permalink to this headline">¶</a></h4>
<p>Released on 2012-10-09.</p>
<ul class="simple">
<li>Add a low-level API that enables painting pages individually on any
cairo surface.</li>
<li><strong>Backward-incompatible change</strong>: remove the <code class="xref py py-meth docutils literal notranslate"><span class="pre">HTML.get_png_pages()</span></code>
method. The new low-level API covers this functionality and more.</li>
<li>Add support for the <code class="docutils literal notranslate"><span class="pre">font-stretch</span></code> property.</li>
<li>Add support for <code class="docutils literal notranslate"><span class="pre">&#64;page:blank</span></code> to select blank pages.</li>
<li>New Sphinx-based and improved docs</li>
<li>Bug fixes:<ul>
<li>Importing Pango in some PyGTK installations.</li>
<li>Layout of inline-blocks with <cite>vertical-align: top</cite> or <cite>bottom</cite>.</li>
<li>Do not repeat a block’s margin-top or padding-top after a page break.</li>
<li>Performance problem with large tables split across many pages.</li>
<li>Anchors and hyperlinks areas now follow CSS transforms.
Since PDF links have to be axis-aligned rectangles, the bounding box
is used. This may be larger than expected with rotations that are
not a multiple of 90 degrees.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="version-0-14">
<h4>Version 0.14<a class="headerlink" href="#version-0-14" title="Permalink to this headline">¶</a></h4>
<p>Released on 2012-08-03.</p>
<ul class="simple">
<li>Add a public API to choose media type used for &#64;media.
(It still defaults to <code class="docutils literal notranslate"><span class="pre">print</span></code>). Thanks Chung Lu!</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">--base-url</span></code> and <code class="docutils literal notranslate"><span class="pre">--resolution</span></code> to the command-line API, making it
as complete as the Python one.</li>
<li>Add support for the <code class="docutils literal notranslate"><span class="pre">&lt;base</span> <span class="pre">href=&quot;...&quot;&gt;</span></code> element in HTML.</li>
<li>Add support for CSS outlines</li>
<li>Switch to gdk-pixbuf instead of Pystacia for loading raster images.</li>
<li>Bug fixes:<ul>
<li>Handling of filenames and URLs on Windows</li>
<li>Unicode filenames with older version of py2cairo</li>
<li><code class="docutils literal notranslate"><span class="pre">base_url</span></code> now behaves as expected when set to a directory name.</li>
<li>Make some tests more robust</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="version-0-13">
<h4>Version 0.13<a class="headerlink" href="#version-0-13" title="Permalink to this headline">¶</a></h4>
<p>Released on 2012-07-23.</p>
<ul class="simple">
<li>Add support for PyGTK, as an alternative to PyGObject + introspection.
This should make WeasyPrint easier to run on platforms that not not have
packages for PyGObject 3.x yet.</li>
<li>Bug fix: crash in PDF outlines for some malformed HTML documents</li>
</ul>
</div>
<div class="section" id="version-0-12">
<h4>Version 0.12<a class="headerlink" href="#version-0-12" title="Permalink to this headline">¶</a></h4>
<p>Released on 2012-07-19.</p>
<ul class="simple">
<li>Add support for collapsed borders on tables. This is currently incompatible
with repeating header and footer row groups on each page: headers and footers
are treated as normal row groups on table with <code class="docutils literal notranslate"><span class="pre">border-collapse:</span> <span class="pre">collapse</span></code>.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">url_fetcher</span></code> to the public API. This enables users to hook into
WeasyPrint for fetching linked stylesheets or images, eg. to generate them
on the fly without going through the network.
This enables the creation of <a class="reference external" href="http://packages.python.org/Flask-WeasyPrint/">Flask-WeasyPrint</a>.</li>
</ul>
</div>
<div class="section" id="version-0-11">
<h4>Version 0.11<a class="headerlink" href="#version-0-11" title="Permalink to this headline">¶</a></h4>
<p>Released on 2012-07-04.</p>
<ul class="simple">
<li>Add support for floats and clear.
Together with various bug fixes, this enables WeasyPrint to pass the Acid2
test! Acid2 is now part of our automated test suite.</li>
<li>Add support for the width, min-width, max-width, height, min-height and
max-height properties in &#64;page. The size property is now the size of the
page’s containing block.</li>
<li>Switch the Variable Dimension rules to <a class="reference external" href="https://github.com/SimonSapin/css/blob/master/margin-boxes-variable-dimension">the new proposal</a>.
The previous implementation was broken in many cases.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">image-rendering</span></code>, <code class="docutils literal notranslate"><span class="pre">transform</span></code>, <code class="docutils literal notranslate"><span class="pre">transform-origin</span></code> and <code class="docutils literal notranslate"><span class="pre">size</span></code>
properties are now unprefixed. The prefixed form (eg. -weasy-size) is ignored
but gives a specific warning.</li>
</ul>
</div>
<div class="section" id="version-0-10">
<h4>Version 0.10<a class="headerlink" href="#version-0-10" title="Permalink to this headline">¶</a></h4>
<p>Released on 2012-06-25.</p>
<ul class="simple">
<li>Add <code class="docutils literal notranslate"><span class="pre">get_png_pages()</span></code> to the public API. It returns each page as
a separate PNG image.</li>
<li>Add a <code class="docutils literal notranslate"><span class="pre">resolution</span></code> parameter for PNG.</li>
<li>Add <em>WeasyPrint Navigator</em>, a web application that shows WeasyPrint’s
output with clickable links. Yes, that’s a browser in your browser.
Start it with <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">weasyprint.navigator</span></code></li>
<li>Add support for <cite>vertical-align: top</cite> and <cite>vertical-align: bottom</cite></li>
<li>Add support for <cite>page-break-before: avoid</cite> and <cite>page-break-after: avoid</cite></li>
<li>Bug fixes</li>
</ul>
</div>
<div class="section" id="version-0-9">
<h4>Version 0.9<a class="headerlink" href="#version-0-9" title="Permalink to this headline">¶</a></h4>
<p>Released on 2012-06-04.</p>
<ul class="simple">
<li>Relative, absolute and fixed positioning</li>
<li>Proper painting order (z-index)</li>
<li>In PDF: support for internal and external hyperlinks as well as bookmarks.</li>
<li>Added the <code class="docutils literal notranslate"><span class="pre">tree</span></code> parameter to the <code class="docutils literal notranslate"><span class="pre">HTML</span></code> class: accepts a parsed lxml
object.</li>
<li>Bug fixes, including many crashes.</li>
</ul>
<p>Bookmarks can be controlled by the <code class="docutils literal notranslate"><span class="pre">-weasy-bookmark-level</span></code> and
<code class="docutils literal notranslate"><span class="pre">-weasy-bookmark-label</span></code> properties, as described in <a class="reference external" href="http://dev.w3.org/csswg/css3-gcpm/#bookmarks">CSS Generated Content
for Paged Media Module</a>.</p>
<p>The default UA stylesheet sets a matching bookmark level on all <code class="docutils literal notranslate"><span class="pre">&lt;h1&gt;</span></code>
to <code class="docutils literal notranslate"><span class="pre">&lt;h6&gt;</span></code> elements.</p>
</div>
<div class="section" id="version-0-8">
<h4>Version 0.8<a class="headerlink" href="#version-0-8" title="Permalink to this headline">¶</a></h4>
<p>Released on 2012-05-07.</p>
<ul class="simple">
<li>Switch from cssutils to <a class="reference external" href="http://packages.python.org/tinycss/">tinycss</a> as the CSS parser.</li>
<li>Switch to the new <a class="reference external" href="http://packages.python.org/cssselect/">cssselect</a>, almost all level 3 selectors are supported now.</li>
<li>Support for inline blocks and inline tables</li>
<li>Automatic table layout (column widths)</li>
<li>Support for the <code class="docutils literal notranslate"><span class="pre">min-width</span></code>, <code class="docutils literal notranslate"><span class="pre">max-width</span></code>, <code class="docutils literal notranslate"><span class="pre">min-height</span></code> and
<code class="docutils literal notranslate"><span class="pre">max-height</span></code> properties, except on table-related and page-related boxes.</li>
<li>Speed improvements on big stylesheets / small documents thanks to tinycss.</li>
<li>Many bug fixes</li>
</ul>
</div>
<div class="section" id="version-0-7-1">
<h4>Version 0.7.1<a class="headerlink" href="#version-0-7-1" title="Permalink to this headline">¶</a></h4>
<p>Released on 2012-03-21.</p>
<p>Change the license from AGPL to BSD.</p>
</div>
<div class="section" id="version-0-7">
<h4>Version 0.7<a class="headerlink" href="#version-0-7" title="Permalink to this headline">¶</a></h4>
<p>Released on 2012-03-21.</p>
<ul class="simple">
<li>Support page breaks between table rows</li>
<li>Support for the <code class="docutils literal notranslate"><span class="pre">orphans</span></code> and <code class="docutils literal notranslate"><span class="pre">widows</span></code> properties.</li>
<li>Support for <code class="docutils literal notranslate"><span class="pre">page-break-inside:</span> <span class="pre">avoid</span></code></li>
<li>Bug fixes</li>
</ul>
<p>Only avoiding page breaks before/after an element is still missing.</p>
</div>
<div class="section" id="version-0-6-1">
<h4>Version 0.6.1<a class="headerlink" href="#version-0-6-1" title="Permalink to this headline">¶</a></h4>
<p>Released on 2012-03-01.</p>
<p>Fix a packaging bug. (Remove use_2to3 in setup.py. We use the same
codebase for Python 2 and 3.)</p>
</div>
<div class="section" id="version-0-6">
<h4>Version 0.6<a class="headerlink" href="#version-0-6" title="Permalink to this headline">¶</a></h4>
<p>Released on 2012-02-29.</p>
<ul class="simple">
<li><em>Backward incompatible</em>: completely change the Python API. See the
documentation:
<a class="reference external" href="https://weasyprint.readthedocs.io/en/latest/tutorial.html#as-a-python-library">https://weasyprint.readthedocs.io/en/latest/tutorial.html#as-a-python-library</a></li>
<li><em>Backward incompatible</em>: Proper margin collapsing.
This changes how blocks are rendered: adjoining margins “collapse”
(their maximum is used) instead of accumulating.</li>
<li>Support images in <code class="docutils literal notranslate"><span class="pre">embed</span></code> or <code class="docutils literal notranslate"><span class="pre">object</span></code> elements.</li>
<li>Switch to pystacia instead of PIL for raster images</li>
<li>Add compatibility with CPython 2.6 and 3.2. (Previously only 2.7
was supported)</li>
<li>Many bug fixes</li>
</ul>
</div>
<div class="section" id="version-0-5">
<h4>Version 0.5<a class="headerlink" href="#version-0-5" title="Permalink to this headline">¶</a></h4>
<p>Released on 2012-02-08.</p>
<ul class="simple">
<li>Support for the <code class="docutils literal notranslate"><span class="pre">overflow</span></code> and <code class="docutils literal notranslate"><span class="pre">clip</span></code> properties.</li>
<li>Support for the <code class="docutils literal notranslate"><span class="pre">opacity</span></code> property from CSS3 Colors.</li>
<li>Support for CSS 2D Transforms. These are prefixed, so you need to use
<code class="docutils literal notranslate"><span class="pre">-weasy-transform</span></code> and <code class="docutils literal notranslate"><span class="pre">-weasy-transform-origin</span></code>.</li>
</ul>
</div>
<div class="section" id="version-0-4">
<h4>Version 0.4<a class="headerlink" href="#version-0-4" title="Permalink to this headline">¶</a></h4>
<p>Released on 2012-02-07.</p>
<ul class="simple">
<li>Support <code class="docutils literal notranslate"><span class="pre">text-align:</span> <span class="pre">justify</span></code>, <code class="docutils literal notranslate"><span class="pre">word-spacing</span></code> and <code class="docutils literal notranslate"><span class="pre">letter-spacing</span></code>.</li>
<li>Partial support for CSS3 Paged Media: page size and margin boxes with
page-based counters.</li>
<li>All CSS 2.1 border styles</li>
<li>Fix SVG images with non-pixel units. Requires CairoSVG 0.3</li>
<li>Support for <code class="docutils literal notranslate"><span class="pre">page-break-before</span></code> and <code class="docutils literal notranslate"><span class="pre">page-break-after</span></code>, except for
the value <code class="docutils literal notranslate"><span class="pre">avoid</span></code>.</li>
<li>Support for the <code class="docutils literal notranslate"><span class="pre">background-clip</span></code>, <code class="docutils literal notranslate"><span class="pre">background-origin</span></code> and
<code class="docutils literal notranslate"><span class="pre">background-size</span></code> from CSS3 (but still with a single background
per element)</li>
<li>Support for the <code class="docutils literal notranslate"><span class="pre">image-rendering</span></code> from SVG. This one is prefixed,
use <code class="docutils literal notranslate"><span class="pre">-weasy-image-rendering</span></code>. It only has an effect on PNG output.</li>
</ul>
</div>
<div class="section" id="version-0-3-1">
<h4>Version 0.3.1<a class="headerlink" href="#version-0-3-1" title="Permalink to this headline">¶</a></h4>
<p>Released on 2011-12-14.</p>
<p>Compatibility with CairoSVG 0.1.2</p>
</div>
<div class="section" id="version-0-3">
<h4>Version 0.3<a class="headerlink" href="#version-0-3" title="Permalink to this headline">¶</a></h4>
<p>Released on 2011-12-13.</p>
<ul class="simple">
<li><strong>Backward-incompatible change:</strong> the ‘size’ property is now prefixed (since
it is in an experimental specification). Use ‘-weasy-size’ instead.</li>
<li>cssutils 0.9.8 or higher is now required.</li>
<li>Support SVG images with CairoSVG</li>
<li>Support generated content: the <code class="docutils literal notranslate"><span class="pre">:before</span></code> and <code class="docutils literal notranslate"><span class="pre">:after</span></code> pseudo-elements,
the <code class="docutils literal notranslate"><span class="pre">content</span></code>, <code class="docutils literal notranslate"><span class="pre">quotes</span></code> and <code class="docutils literal notranslate"><span class="pre">counter-*</span></code> properties.</li>
<li>Support ordered lists: all CSS 2.1 values of the <code class="docutils literal notranslate"><span class="pre">list-style-type</span></code> property.</li>
<li>New user-agent stylesheet with HTML 5 elements and automatic quotes for many
languages. Thanks Peter Moulder!</li>
<li>Disable cssutils validation warnings, they are redundant with WeasyPrint’s.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">--version</span></code> to the command-line script.</li>
<li>Various bug fixes</li>
</ul>
</div>
<div class="section" id="version-0-2">
<h4>Version 0.2<a class="headerlink" href="#version-0-2" title="Permalink to this headline">¶</a></h4>
<p>Released on 2011-11-25.</p>
<ul class="simple">
<li>Support for tables.</li>
<li>Support the <cite>box-sizing</cite> property from CSS 3 Basic User Interface</li>
<li>Support all values of vertical-align except top and bottom. They are
interpreted as text-top and text-bottom.</li>
<li>Minor bug fixes</li>
</ul>
<p>Tables have some limitations:
Only the fixed layout and separate border model are supported.
There are also no page break inside tables so a table higher
than a page will overflow.</p>
</div>
<div class="section" id="version-0-1">
<h4>Version 0.1<a class="headerlink" href="#version-0-1" title="Permalink to this headline">¶</a></h4>
<p>Released on 2011-10-28.</p>
<p>First packaged release. Supports “simple” CSS 2.1 pages: there is no
support for floats, tables, or absolute positioning. Other than that
most of CSS 2.1 is supported, as well as CSS 3 Colors and Selectors.</p>
</div>
</div>
</div>
</div>
<div class="section" id="authors">
<h2>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h2>
<p>Development Lead:</p>
<ul class="simple">
<li>Simon Sapin</li>
<li>Guillaume Ayoub</li>
</ul>
<p>Contributors:</p>
<ul class="simple">
<li>Aarni Koskela</li>
<li>Alessandro Pasotti</li>
<li>Anaèle Baumgartner</li>
<li>Andres Riofrio</li>
<li>Aymeric Bois</li>
<li>Chung Wu</li>
<li>Clément Plasse</li>
<li>Colin Leitner</li>
<li>Florian Demmer</li>
<li>Florian Mounier</li>
<li>Frédérick Deslandes</li>
<li>Glwadys Fayolle</li>
<li>Gregory Brown</li>
<li>Joe Hu</li>
<li>Johan Dahlin</li>
<li>Johannes Duschl</li>
<li>Peter Moulder</li>
<li>Pierre-Alain Mignot</li>
<li>Priit Laes</li>
<li>Salem Harrache</li>
<li>Sergey Pikhovkin</li>
<li>Smylers</li>
<li>Thomas Grainger</li>
<li>kaikuehne</li>
<li>mbarkhau</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2011-2018, Simon Sapin and contributors, see AUTHORs
      
        <span class="commit">
          Revision <code>0f25c532</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: stable
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/stable/">stable</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//readthedocs.org/projects/weasyprint/downloads/pdf/stable/">pdf</a></dd>
        
          <dd><a href="//readthedocs.org/projects/weasyprint/downloads/htmlzip/stable/">htmlzip</a></dd>
        
          <dd><a href="//readthedocs.org/projects/weasyprint/downloads/epub/stable/">epub</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/weasyprint/?fromdocs=weasyprint">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/weasyprint/?fromdocs=weasyprint">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  

    
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'43',
              LANGUAGE:'en',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
